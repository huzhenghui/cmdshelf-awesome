<!DOCTYPE html>
<html lang="en">
  <head><meta charset="utf-8"/>
    <title>Tamagotchi-style web app</title>
    <link rel="stylesheet" type="text/css" media="all" href="./github-markdown.css"/>
    <link rel="stylesheet" type="text/css" media="all" href="./literate-git.css"/>
    <script src="jquery-3.0.0.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2.0.4"></script>
    <script src="literate-git.js"></script>
    <style>.patch .hll { background-color: #ffffcc }
.patch  { background: #f8f8f8; }
.patch .c { color: #408080; font-style: italic } /* Comment */
.patch .err { border: 1px solid #FF0000 } /* Error */
.patch .k { color: #008000; font-weight: bold } /* Keyword */
.patch .o { color: #666666 } /* Operator */
.patch .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.patch .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.patch .cp { color: #BC7A00 } /* Comment.Preproc */
.patch .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.patch .c1 { color: #408080; font-style: italic } /* Comment.Single */
.patch .cs { color: #408080; font-style: italic } /* Comment.Special */
.patch .gd { color: #A00000 } /* Generic.Deleted */
.patch .ge { font-style: italic } /* Generic.Emph */
.patch .gr { color: #FF0000 } /* Generic.Error */
.patch .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.patch .gi { color: #00A000 } /* Generic.Inserted */
.patch .go { color: #888888 } /* Generic.Output */
.patch .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.patch .gs { font-weight: bold } /* Generic.Strong */
.patch .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.patch .gt { color: #0044DD } /* Generic.Traceback */
.patch .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.patch .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.patch .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.patch .kp { color: #008000 } /* Keyword.Pseudo */
.patch .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.patch .kt { color: #B00040 } /* Keyword.Type */
.patch .m { color: #666666 } /* Literal.Number */
.patch .s { color: #BA2121 } /* Literal.String */
.patch .na { color: #7D9029 } /* Name.Attribute */
.patch .nb { color: #008000 } /* Name.Builtin */
.patch .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.patch .no { color: #880000 } /* Name.Constant */
.patch .nd { color: #AA22FF } /* Name.Decorator */
.patch .ni { color: #999999; font-weight: bold } /* Name.Entity */
.patch .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.patch .nf { color: #0000FF } /* Name.Function */
.patch .nl { color: #A0A000 } /* Name.Label */
.patch .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.patch .nt { color: #008000; font-weight: bold } /* Name.Tag */
.patch .nv { color: #19177C } /* Name.Variable */
.patch .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.patch .w { color: #bbbbbb } /* Text.Whitespace */
.patch .mb { color: #666666 } /* Literal.Number.Bin */
.patch .mf { color: #666666 } /* Literal.Number.Float */
.patch .mh { color: #666666 } /* Literal.Number.Hex */
.patch .mi { color: #666666 } /* Literal.Number.Integer */
.patch .mo { color: #666666 } /* Literal.Number.Oct */
.patch .sa { color: #BA2121 } /* Literal.String.Affix */
.patch .sb { color: #BA2121 } /* Literal.String.Backtick */
.patch .sc { color: #BA2121 } /* Literal.String.Char */
.patch .dl { color: #BA2121 } /* Literal.String.Delimiter */
.patch .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.patch .s2 { color: #BA2121 } /* Literal.String.Double */
.patch .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.patch .sh { color: #BA2121 } /* Literal.String.Heredoc */
.patch .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.patch .sx { color: #008000 } /* Literal.String.Other */
.patch .sr { color: #BB6688 } /* Literal.String.Regex */
.patch .s1 { color: #BA2121 } /* Literal.String.Single */
.patch .ss { color: #19177C } /* Literal.String.Symbol */
.patch .bp { color: #008000 } /* Name.Builtin.Pseudo */
.patch .fm { color: #0000FF } /* Name.Function.Magic */
.patch .vc { color: #19177C } /* Name.Variable.Class */
.patch .vg { color: #19177C } /* Name.Variable.Global */
.patch .vi { color: #19177C } /* Name.Variable.Instance */
.patch .vm { color: #19177C } /* Name.Variable.Magic */
.patch .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
  </head>

  <body>
  <div class="content markdown-body"><h1>Tamagotchi-style web app</h1>

<div class="literate-git-node" data-commit-sha1="e30273b2dfdfa4af4e0d05ff812828d3f5889293">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">1</span>
    Introduction to web programming</h2>

<div class="message-body"><p>Done some Scratch?  Got a lot of useful ideas from that?  Let's see how
to take similar ideas and create something which runs on the web.  We
will work towards a Tamagotchi-style game.</p>

<p>In some ways programming on the web is very similar to Scratch &mdash;
Scratch has sprites with costumes and scripts.  The web-app will have
parts that describe what the page looks like (like costumes), and parts
which say how it behaves (like scripts).</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e30273b2dfdfa4af4e0d05ff812828d3f5889293"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e30273b2dfdfa4af4e0d05ff812828d3f5889293"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="a90a0c0b044bce980467fb316197fcb5d2363255">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">2</span>
    Build basic structure</h2>

<div class="message-body"><p>Our web app will be made of three pieces, each controlling one aspect of
the app:</p>

<ul>
<li>An <code>HTML</code> file &mdash; the <em>hyper text markup language</em> gives
the <em>content</em> of the page, in terms of what text, sections, headings,
areas for graphics, and so on there are.</li>
<li>A <code>CSS</code> file &mdash; the <em>cascading style sheet</em> describes what we want
the content to <em>look like</em>.</li>
<li>A <code>JS</code> file &mdash; the <em>JavaScript</em> is the programming language
understood by web browsers, and lets us describe what <em>behaviour</em> we
want the web app to have.</li>
</ul>

<p>We'll set up a basic web app which does very little, but allows us to
make sure these three pieces are working correctly together.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a90a0c0b044bce980467fb316197fcb5d2363255"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a90a0c0b044bce980467fb316197fcb5d2363255"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>2</td>
    <td><pre><span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre>    <span class="c1">// Your code JavaScript goes here.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;&lt;</span><span class="nt">head</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>2</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Tamagotchi<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://code.jquery.com/jquery-2.2.0.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;code.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;style.css&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">link</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Look after your Tamagotchi!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="2922cfb2aeb93871dd24a620f26df8a23294a2c7">

<h2><span class="sec-num">2.1</span>
    Add bare skeleton of HTML/CSS/JS structure</h2>

<div class="message-body"><p>The web app is made of three parts.  The content here is a bare skeleton
to get things started.  If you're using a web-based system like <code>JSBin</code>,
these three pieces are provided for you.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/2922cfb2aeb93871dd24a620f26df8a23294a2c7"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/2922cfb2aeb93871dd24a620f26df8a23294a2c7"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>2</td>
    <td><pre><span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre>    <span class="c1">// Your code JavaScript goes here.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;&lt;</span><span class="nt">head</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>2</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Tamagotchi<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://code.jquery.com/jquery-2.2.0.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;code.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;style.css&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">link</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="c">&lt;!-- Your web page HTML goes here. --&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="c">/* Your web styling CSS goes here. */</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="41ca25073b293856da565054441d63c03512f691">

<h2><span class="sec-num">2.2</span>
    Add header</h2>

<div class="message-body"><p>Notice how HTML uses 'tags' to draw elements, and how elements have
matching start and end tags.  You could experiment with changing <code>&lt;h1&gt;</code>
to <code>&lt;h2&gt;</code> or <code>&lt;h3&gt;</code> or <code>&lt;h4&gt;</code> and see what happens.  Or try adding some
more text in a paragraph element:</p>

<pre><code>&lt;p&gt;
  ... text goes here ...
&lt;/p&gt;
</code></pre>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/41ca25073b293856da565054441d63c03512f691"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/41ca25073b293856da565054441d63c03512f691"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>9</td>
    <td></td>
    <td><pre>    <span class="c">&lt;!-- Your web page HTML goes here. --&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Look after your Tamagotchi!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="26f7bac8e728fab7763a061b29031fc18aa7de42">

<h2><span class="sec-num">2.3</span>
    Styling the page</h2>

<div class="message-body"><p>You can change how your page content looks using another web language
called CSS (which is short for Cascading Style Sheets).  It's a series
of rules, and each rule says what parts of the web page it applies to,
and what to do with those parts.  Here, we choose all <code>&lt;h1&gt;</code> pieces, and
make them red.</p>

<p>Other styles to experiment with include:</p>

<ul>
<li><code>font-size</code></li>
<li><code>color</code></li>
<li><code>min-height</code></li>
<li><code>background</code></li>
<li><code>border</code></li>
<li><code>margin</code></li>
<li><code>padding</code></li>
</ul>

<p>You can also style the whole page by selecting the <code>&lt;body&gt;</code> in CSS.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/26f7bac8e728fab7763a061b29031fc18aa7de42"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/26f7bac8e728fab7763a061b29031fc18aa7de42"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-del">
    <td>1</td>
    <td></td>
    <td><pre><span class="c">/* Your web styling CSS goes here. */</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="e59b090f64c88f497b2aa7ffa9af7393de3c9240">

<h2><span class="sec-num">2.4</span>
    Add a canvas to draw the Tamagotchi on</h2>

<div class="message-body"><p>The web also allows you to create pictures and well as text.  This is
done by creating a canvas for the drawing to happen on.  The <code>&lt;canvas&gt;</code>
element here has a predefined, fixed size on the screen.</p>

<p>But so far we're not drawing anything.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e59b090f64c88f497b2aa7ffa9af7393de3c9240"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e59b090f64c88f497b2aa7ffa9af7393de3c9240"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Look after your Tamagotchi!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>12</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>13</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="9267e0748093324ad943573b4e04534c1c1c1aa3">

<h2><span class="sec-num">2.5</span>
    Make overall background light grey</h2>

<div class="message-body"><p>White is a bit harsh for the background to the whole game.  We can add
styling to the whole <code>&lt;body&gt;</code> to soften it slightly.  This way of
describing a colour uses 'Red, Green, Blue' values.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/9267e0748093324ad943573b4e04534c1c1c1aa3"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/9267e0748093324ad943573b4e04534c1c1c1aa3"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>1</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="3d17a42f95de746b42459eb671e5f356fd4bc62a">

<h2><span class="sec-num">2.6</span>
    Make canvas background champagne</h2>

<div class="message-body"><p>We can style the canvas so we can see it better.  The <code>#game</code> selector
in the CSS lets us talk about the canvas element which has the
<code>id="game"</code> attribute in the HTML.  This 'identifier' ties them
together.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/3d17a42f95de746b42459eb671e5f356fd4bc62a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/3d17a42f95de746b42459eb671e5f356fd4bc62a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>1</td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="ee1a9790de7f568cf9b1d94305e0c3d2cf750b2f">

<h2><span class="sec-num">2.7</span>
    Leave a bit more margin round page</h2>

<div class="message-body"><p>Everything is right up against the edge of the browser window.  By
adding a 'margin' to the body, we can leave some room.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/ee1a9790de7f568cf9b1d94305e0c3d2cf750b2f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/ee1a9790de7f568cf9b1d94305e0c3d2cf750b2f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-del">
    <td>1</td>
    <td></td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="c701ce5f15e2599e9d0cfa948a0ce7e72391d344">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">3</span>
    Draw the egg and make it hatch</h2>

<div class="message-body"><p>The first step is to show the Tamagotchi's egg when the player loads our
web app.  Then, when the player clicks a button, the egg will hatch into
the actual Tamagotchi.</p>

<p>To do this, we'll need to add the button to the <code>HTML</code>, and then write
some JavaScript code to do the drawing, and connect them together.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/c701ce5f15e2599e9d0cfa948a0ce7e72391d344"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/c701ce5f15e2599e9d0cfa948a0ce7e72391d344"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>1</td>
    <td>1</td>
    <td><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>3</td>
    <td></td>
    <td><pre>    <span class="c1">// Your code JavaScript goes here.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>20</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>21</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>25</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>26</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Look after your Tamagotchi!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Click here to make it hatch: <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>14</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>15</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="87501359cecd310b7fedb7887a37f5c92bdb3353">

<h2><span class="sec-num">3.1</span>
    Get a '2D drawing context' for the canvas</h2>

<div class="message-body"><p>Our drawing is going to be in 2D.  You can do 3D drawing, but it's quite
a lot more complicated.  We find the canvas using the name (<code>id</code>) we gave
it, and then ask the canvas for its '2D' drawing 'context'.  It's not
hugely important right now exactly what a 'context' is, but it's what
lets us draw on the page.</p>

<p>The <code>document.getElementById()</code> finds the <code>game</code> element, which is the
canvas we created in the HTML earlier.</p>

<p>The dot (<code>.</code>) between the <code>canvas</code> and the <code>getContext</code> is a bit like
choosing the <code>getContext</code> option from a right-click menu of things you
can do with or to <code>canvas</code>.  The <code>()</code> are for making it actually do the
set of instructions (function) <code>getContext</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/87501359cecd310b7fedb7887a37f5c92bdb3353"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/87501359cecd310b7fedb7887a37f5c92bdb3353"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>1</td>
    <td>1</td>
    <td><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>3</td>
    <td></td>
    <td><pre>    <span class="c1">// Your code JavaScript goes here.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>5</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="d34f9672b2b79410e8066a21880b201b0944affa">

<h2><span class="sec-num">3.2</span>
    Draw Tamagotchi 'egg'</h2>

<div class="message-body"><p>The egg is a simple circle, but we need to know about 'paths' to draw
one.  You set up a path that an imaginary pen is going to take round the
canvas, and then, when it's done, say whether to: draw the outline (with
a 'stroke' of the pen) or 'fill' it in.  We want a coloured-in circle so
will 'fill' it; you can choose a colour, or something more
complicated (gradient or pattern) &mdash; we'll stick with a plain
colour.</p>

<p>To talk about position on the canvas, everything is done in terms of <em>x</em>
and <em>y</em> coordinates &mdash; starting in the top-left corner, how far
across should you go (<em>x</em>), and then how far down (<em>y</em>).  Annoyingly,
this is different to how Scratch does it, where you start in the middle
and then go across and up.  Scratch's way is how mathematicians do
things; most computer graphics is done the way the HTML canvas does it.
This is for 'historical reasons'.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/d34f9672b2b79410e8066a21880b201b0944affa"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/d34f9672b2b79410e8066a21880b201b0944affa"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>10</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="d665685cbfc4693c7e28fcc9007a39ccef578953">

<h2><span class="sec-num">3.3</span>
    Add 'Hatch' button and instructions</h2>

<div class="message-body"><p>We can add a button which will start the game using the HTML <code>&lt;button&gt;</code>
element.  But so far, nothing happens when you click on it, because we
haven't connected it to any JavaScript code.</p>

<p>Add styling to the button if you like by adding <code>#hatch {...}</code> to the
CSS.  The identifier for the button is <code>hatch</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/d665685cbfc4693c7e28fcc9007a39ccef578953"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/d665685cbfc4693c7e28fcc9007a39ccef578953"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Look after your Tamagotchi!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Click here to make it hatch: <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>14</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>15</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="c9e0a443f7e4ab057bc6d19f16885b0aff156ca7">

<h2><span class="sec-num">3.4</span>
    Say we want to draw the alien when button clicked</h2>

<div class="message-body"><p>We declare that when the button (which we describe by giving its id) is
clicked, we want the function (set of instructions) <code>draw_alien</code> to
happen.  But we haven't yet said what <code>draw_alien</code> means, so it'll look
like nothing happens when we click the button.  If you bring up the
'developer tools' for your browser, you can see an error like: <code>Uncaught
ReferenceError: draw_alien is not defined</code> which means you're trying to
refer to something but you haven't defined it.  We'll do that next.</p>

<p>The current situation is like an imaginary situation in Scratch where
you've got a script which says 'when this sprite clicked,
jump-up-and-down', but you haven't defined the custom 'jump-up-and-down'
block.  (This situation is imaginary because Scratch, sensibly, won't
let you do this.)</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/c9e0a443f7e4ab057bc6d19f16885b0aff156ca7"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/c9e0a443f7e4ab057bc6d19f16885b0aff156ca7"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>12</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="6f8e6038fbc6dc2db2abf3028db27d417f0a5968">

<h2><span class="sec-num">3.5</span>
    draw_alien(): Add</h2>

<div class="message-body"><p>To actually draw the alien, we'll just use two overlapping blue circles.
To say where the circles go, we use coordinates as before.  Now it
should actually draw the Tamagotchi when you click the 'hatch' button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/6f8e6038fbc6dc2db2abf3028db27d417f0a5968"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/6f8e6038fbc6dc2db2abf3028db27d417f0a5968"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>20</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>21</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>25</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>26</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="a66c60f48cb696ad4d94261f79675196c540910a">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">4</span>
    Fade out 'hatch' instructions when game starts</h2>

<div class="message-body"><p>This is fine but the instructions remain once the Tamagotchi has
hatched, and that doesn't make sense because you can't hatch the
Tamagotchi more than once.  To fix this, we want the instructions to go
away at the same time as the alien appears.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a66c60f48cb696ad4d94261f79675196c540910a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a66c60f48cb696ad4d94261f79675196c540910a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>25</td>
    <td></td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>25</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>26</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>27</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_out_hatch_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>28</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>29</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>30</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>32</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien_fade_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>33</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>34</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>35</td>
    <td><pre>        <span class="nx">fade_out_hatch_instructions</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>36</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>26</td>
    <td>37</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>13</td>
    <td></td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Click here to make it hatch: <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch:</pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>15</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>16</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="435716a12e94cfebd885eb9835b5648676d5b0f4">

<h2><span class="sec-num">4.1</span>
    Give an 'id' to the 'Hatch' instructions</h2>

<div class="message-body"><p>To be able to get rid of the instructions paragraph, we need to be able
to identify it, so give it an <code>id</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/435716a12e94cfebd885eb9835b5648676d5b0f4"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/435716a12e94cfebd885eb9835b5648676d5b0f4"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>13</td>
    <td></td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Click here to make it hatch: <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch: <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="a28e55268bf8b5c9ad77bae543c50fbb75895b20">

<h2><span class="sec-num">4.2</span>
    (Reformat)</h2>

<div class="message-body"><p>It's worth making sure your code is readable, and part of that is not
having lines which are too long.  There isn't a hard and fast rule for
what counts as 'too long', so choose something which works for your
development set-up.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a28e55268bf8b5c9ad77bae543c50fbb75895b20"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a28e55268bf8b5c9ad77bae543c50fbb75895b20"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>13</td>
    <td></td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch: <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch:</pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>15</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>16</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="746de5fd32f2ba13520c74e5b6854277401c8b8e">

<h2><span class="sec-num">4.3</span>
    <code>fade_out_hatch_instructions()</code>: Add</h2>

<div class="message-body"><p>A new function saying how to make the 'instructions' paragraph fade out.
The <code>fadeOut()</code> function is part of the <code>jQuery</code> library we're using and
takes care of the animation, timing, etc.  Again, nothing happens yet
because all we've done is say what <code>fade_out_hatch_instructions</code> means.
So far, we haven't told it to <em>do</em> those instructions.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/746de5fd32f2ba13520c74e5b6854277401c8b8e"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/746de5fd32f2ba13520c74e5b6854277401c8b8e"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>25</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>26</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>27</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_out_hatch_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>28</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>29</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>30</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>26</td>
    <td>31</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="94e31503070010ea48dc732188dedbcb3cba6b30">

<h2><span class="sec-num">4.4</span>
    draw<em>alien</em>fade_instructions(): Add</h2>

<div class="message-body"><p>We are defining a lot of functions, but it makes your code easier to
read.  It might seem that the only thing that matters is that your
program works, but it's also very important that somebody reading your
code can understand it.  Often this is you, a month later.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/94e31503070010ea48dc732188dedbcb3cba6b30"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/94e31503070010ea48dc732188dedbcb3cba6b30"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>29</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>30</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>32</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien_fade_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>33</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>34</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>35</td>
    <td><pre>        <span class="nx">fade_out_hatch_instructions</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>36</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>37</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="22d44526043ad1973f0909b67848bf68bbb66510">

<h2><span class="sec-num">4.5</span>
    On 'Hatch', fade instructions too</h2>

<div class="message-body"><p>When the button is clicked, we want the <em>new</em> set of instructions to be
done.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/22d44526043ad1973f0909b67848bf68bbb66510"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/22d44526043ad1973f0909b67848bf68bbb66510"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>25</td>
    <td></td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>25</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>26</td>
    <td>26</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>27</td>
    <td>27</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_out_hatch_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="3ec80341aa59475f4584aa6e361d2b269d5dd06c">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">5</span>
    Define function to draw a circle</h2>

<div class="message-body"><p>Take a step back and notice that we're drawing circles three times, and
repeating the same slightly fiddly set of instructions each time.  When
you notice this, it's a good idea to collect those instructions together
and give them a name, i.e., define a new function.  We've done this
before, but this function has something new compared to the ones we've
defined before &mdash; it's not enough to just say 'draw a circle', you
need to know <em>where</em> and <em>how big</em>. The function has extra information it
needs before it can do its job.  The 'caller' has to supply those extra
pieces of information.</p>

<p>That's why our previous functions have <code>()</code> &mdash; there's nothing
between the <code>()</code> because there is no extra information required.</p>

<p>Once we have this handy way of saying 'draw a circle here and make it
this big', we use it to make the rest of our code easier to read.</p>

<p>Note that having made these changes, the app behaves the same, but it is
easier to read and understand.  This is known as <em>code refactoring</em>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/3ec80341aa59475f4584aa6e361d2b269d5dd06c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/3ec80341aa59475f4584aa6e361d2b269d5dd06c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>13</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>7</td>
    <td></td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>8</td>
    <td></td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>9</td>
    <td></td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>    <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>16</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>17</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>18</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>19</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>20</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>16</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>17</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>18</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>19</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>20</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>21</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>22</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>21</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>25</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="7107c67a7ac08b533e694687788f88a2436f625f">

<h2><span class="sec-num">5.1</span>
    <code>draw_circle()</code>: Add</h2>

<div class="message-body"><p>This function takes three arguments, two to say where the circle should
be, and one to say how big it should be.  So far we aren't using the
function, though, only <em>defining</em> it.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/7107c67a7ac08b533e694687788f88a2436f625f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/7107c67a7ac08b533e694687788f88a2436f625f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>13</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>14</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>15</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="5bbbe33c47fb48d50f48614ed5a89749089beb48">

<h2><span class="sec-num">5.2</span>
    Use <code>draw_circle()</code> to draw the egg</h2>

<div class="message-body"><p>To a human reader, this code now makes it clearer what we're doing.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/5bbbe33c47fb48d50f48614ed5a89749089beb48"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/5bbbe33c47fb48d50f48614ed5a89749089beb48"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>14</td>
    <td></td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>15</td>
    <td></td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>16</td>
    <td></td>
    <td><pre>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>    <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">180</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>17</td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>18</td>
    <td>16</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>17</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="1c7a34d1f7f3643df529c86d6d05ba8f86118198">

<h2><span class="sec-num">5.3</span>
    Use <code>draw_circle()</code> to draw the hatched Tamagotchi</h2>

<div class="message-body"><p>The gain is bigger when we're drawing the actual alien; it's much
clearer for a human reader to see that it's made up of two circles.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/1c7a34d1f7f3643df529c86d6d05ba8f86118198"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/1c7a34d1f7f3643df529c86d6d05ba8f86118198"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>18</td>
    <td>18</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>19</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>21</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>22</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>23</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>24</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>25</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>26</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>27</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fill</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>21</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>25</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="2136536d5f4a1f98f8b77498bad2a77fafdb8547">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">6</span>
    Show how happy, healthy, hungry Tamagotchi is</h2>

<div class="message-body"><p>We can now start adding the features which will make a playable game.
The player will need to make sure the Tamagotchi stays healthy, happy,
and not too hungry.  The first step is to give the player some displays
which show the current state of the Tamagotchi.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/2136536d5f4a1f98f8b77498bad2a77fafdb8547"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/2136536d5f4a1f98f8b77498bad2a77fafdb8547"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>26</td>
    <td>26</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>27</td>
    <td>27</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_out_hatch_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>29</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>29</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">fade_in_levels_display</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>30</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>32</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_levels_display</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>33</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>34</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#levels&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>35</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>36</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>32</td>
    <td>37</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien_fade_instructions</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch:</pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;levels&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: 0<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>21</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>22</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>1</td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="29c8e61501bc3aae495d670ca5ac14e2c0275551">

<h2><span class="sec-num">6.1</span>
    Add health, happiness, hungriness level displays</h2>

<div class="message-body"><p>Add three <code>&lt;p&gt;</code> elements to the html, to show the Tamagotchi's current
levels of health, happiness, and hungriness.  It starts off fully
healthy and happy, and not at all hungry.</p>

<p>This isn't quite right, because these displays are always visible, even
at the very start when only the egg is on the screen.  The displays
should only appear when the Tamagotchi has hatched; we'll fix that next.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/29c8e61501bc3aae495d670ca5ac14e2c0275551"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/29c8e61501bc3aae495d670ca5ac14e2c0275551"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch:</pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: 0<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>19</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>20</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="fbb704992b859107429abd950f0db6f58db1b905">

<h2><span class="sec-num">6.2</span>
    Collect the levels displays into one 'div'</h2>

<div class="message-body"><p>To be able to talk about the displays all as one collection, we group
them into a <code>&lt;div&gt;</code> with an <code>id</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/fbb704992b859107429abd950f0db6f58db1b905"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/fbb704992b859107429abd950f0db6f58db1b905"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch:</pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>16</td>
    <td></td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>17</td>
    <td></td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>18</td>
    <td></td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: 0<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;levels&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: 0<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>21</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>22</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="8a9eee59626033f168db2a42f8b15008e1bcc74d">

<h2><span class="sec-num">6.3</span>
    Hide the levels displays on start-up</h2>

<div class="message-body"><p>We've been using CSS to control the appearance of various parts of our
web-app.  One way it allows us to do this it to say that some parts
shouldn't appear at all, by saying <code>display: none</code>.  Then, within the
program, we can make them appear at the right time.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/8a9eee59626033f168db2a42f8b15008e1bcc74d"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/8a9eee59626033f168db2a42f8b15008e1bcc74d"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>1</td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="21517459c7e4f0bbf40a79d0f81e303eba9b398f">

<h2><span class="sec-num">6.4</span>
    <code>fade_in_levels_display()</code>: Add</h2>

<div class="message-body"><p>In a very similar way to how we defined a function to fade out the hatch
instructions, we can define a function to fade <em>in</em> the displays of
health, etc.  We refer to the group of displays by the <code>id</code> of the
<code>&lt;div&gt;</code>, which is '<code>levels</code>'.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/21517459c7e4f0bbf40a79d0f81e303eba9b398f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/21517459c7e4f0bbf40a79d0f81e303eba9b398f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>29</td>
    <td>29</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>30</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>32</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_levels_display</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>33</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>34</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#levels&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>35</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>36</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>32</td>
    <td>37</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien_fade_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>33</td>
    <td>38</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>34</td>
    <td>39</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="42ddebd6ddb7b6ef3fe38ed4af9dc6b8055f9b72">

<h2><span class="sec-num">6.5</span>
    Fade in levels display after 'hatch' faded out</h2>

<div class="message-body"><p>The <code>fadeOut</code> function from jQuery can optionally take more
arguments (extra pieces of information).  The first is how long to make
the animation last, and the second is what to do when the animation has
finished.  Here we add arguments to make the animation last 400ms, and
afterwards, call our new <code>fade_in_levels_display</code> function.</p>

<p>Note that we do not put <code>()</code> after <code>fade_in_levels_display</code>.  We want to
tell <code>fadeOut</code> what to do next, <em>not</em> follow the
<code>fade_in_levels_display</code> instructions right away.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/42ddebd6ddb7b6ef3fe38ed4af9dc6b8055f9b72"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/42ddebd6ddb7b6ef3fe38ed4af9dc6b8055f9b72"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>26</td>
    <td>26</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>27</td>
    <td>27</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_out_hatch_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>29</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>29</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">fade_in_levels_display</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>30</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>32</td>
    <td>32</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_levels_display</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="43ff3da2419c0273d773f26fbfc494ebc61405b6">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">7</span>
    Make Tamagotchi get hungrier (basic idea)</h2>

<div class="message-body"><p>To make a start on the game mechanics, we'll set up the basic idea of
keeping track of the Tamagotchi's changing levels of hunger.  We add a
variable in the JavaScript, to keep track of how hungry it is, and write
a function to update both it and the display.  Temporarily, to make sure
everything is working, we make the Tamagotchi get 5 steps hungrier after
two seconds.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/43ff3da2419c0273d773f26fbfc494ebc61405b6"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/43ff3da2419c0273d773f26fbfc494ebc61405b6"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>16</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>20</td>
    <td>28</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>29</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>30</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>32</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">make_alien_hungrier</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>33</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>34</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>35</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>16</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;levels&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>17</td>
    <td></td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>18</td>
    <td></td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>19</td>
    <td></td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: 0<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;health&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>21</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="e026c7e8890701c8b65f65f439f0883bc41dfa54">

<h2><span class="sec-num">7.1</span>
    Add 'id's to individual level displays</h2>

<div class="message-body"><p>To be able to update the displays, we need to be able to refer to the
number part of each one.  For this we use an HTML <code>&lt;span&gt;</code> element.
This is a bit like a <code>&lt;div&gt;</code> except it doesn't cause a break in the
paragraph.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e026c7e8890701c8b65f65f439f0883bc41dfa54"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e026c7e8890701c8b65f65f439f0883bc41dfa54"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>16</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;levels&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>17</td>
    <td></td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>18</td>
    <td></td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: 100<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-del">
    <td>19</td>
    <td></td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: 0<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;health&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>21</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="f9f2c10f22cf00332beb8aba9601ab0758721719">

<h2><span class="sec-num">7.2</span>
    Define variable 'hungriness'</h2>

<div class="message-body"><p>To keep track of the Tamagotchi's hunger levels within the program, we
need a variable.  When it first hatches, it starts off not at all
hungry, so the initial value is zero.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/f9f2c10f22cf00332beb8aba9601ab0758721719"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/f9f2c10f22cf00332beb8aba9601ab0758721719"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>8</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>9</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>10</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="cc66634fea1bfc79196346390ffe245769bae4f4">

<h2><span class="sec-num">7.3</span>
    <code>make_alien_hungrier()</code>: Add</h2>

<div class="message-body"><p>As time goes by in the game, the Tamagotchi will get hungrier.
We'll create a function which does one this.  There are two things which
we need to do:</p>

<ul>
<li>Update the program's idea of how hungry it is &mdash; this means
increasing the <code>hungriness</code> variable.</li>
<li>Update the web page to show the player the new value &mdash; this
means putting the new number in as the HTML of the <code>&lt;span&gt;</code> called
<code>hungriness</code>.</li>
</ul>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/cc66634fea1bfc79196346390ffe245769bae4f4"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/cc66634fea1bfc79196346390ffe245769bae4f4"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>16</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="1b9f1b919b2c29f77c7d12b113a1f7b4a3965e92">

<h2><span class="sec-num">7.4</span>
    Temp: Make alien hungrier 2" after hatching</h2>

<div class="message-body"><p>Just to check that this is all working, we'll set up a timer to make the
Tamagotchi get hungrier two seconds after it hatches.  We'll get rid of
this once we're happy it's all working correctly.  At this point, if you
hatch the Tamagotchi, you should then see the hungriness go up from 0 to
5 after two seconds.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/1b9f1b919b2c29f77c7d12b113a1f7b4a3965e92"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/1b9f1b919b2c29f77c7d12b113a1f7b4a3965e92"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>29</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>30</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>32</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">make_alien_hungrier</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>33</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>32</td>
    <td>34</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>33</td>
    <td>35</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="5b59bec01a03e4eb72f047a803be40928fa35bbd">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">8</span>
    Make Tamagotchi get hungrier (properly)</h2>

<div class="message-body"><p>Now we know the basic idea works, we'll do this properly.  The
Tamagotchi will get hungrier every two seconds, until its hungriness
reaches 100.  At that point, the player has lost the game, and we
display a suitable message.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/5b59bec01a03e4eb72f047a803be40928fa35bbd"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/5b59bec01a03e4eb72f047a803be40928fa35bbd"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>8</td>
    <td></td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>10</td>
    <td></td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>11</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>11</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>13</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>28</td>
    <td>27</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>28</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>29</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>31</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>32</td>
    <td></td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">make_alien_hungrier</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>33</td>
    <td>30</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>34</td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>35</td>
    <td>32</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>48</td>
    <td>45</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>49</td>
    <td>46</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>50</td>
    <td>47</td>
    <td><pre>        <span class="nx">fade_out_hatch_instructions</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>48</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>49</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>50</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>51</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>52</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>53</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>54</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>55</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>56</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>57</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>58</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>59</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>51</td>
    <td>69</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>52</td>
    <td>70</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>18</td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>21</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>23</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>24</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="e06ad91a499ce03c92cac621e6c68b800b86c870">

<h2><span class="sec-num">8.1</span>
    Remove temporary hungriness increase</h2>

<div class="message-body"><p>Now we know the idea works, we will work on making the Tamagotchi get
continually hungrier as time goes on.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e06ad91a499ce03c92cac621e6c68b800b86c870"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e06ad91a499ce03c92cac621e6c68b800b86c870"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>29</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>30</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>31</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>32</td>
    <td></td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">make_alien_hungrier</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>33</td>
    <td>31</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>34</td>
    <td>32</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>35</td>
    <td>33</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="0b3db2361d14b13b19059f0c2df52d1a54edff1c">

<h2><span class="sec-num">8.2</span>
    <code>make_alien_hungrier()</code>: Move definition lower</h2>

<div class="message-body"><p>We can see we'll need functions dealing with the Tamagotchi's health and
happiness too.  It makes more sense to put functions dealing with the
Tamagotchi's state of being together.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/0b3db2361d14b13b19059f0c2df52d1a54edff1c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/0b3db2361d14b13b19059f0c2df52d1a54edff1c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>8</td>
    <td></td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-del">
    <td>9</td>
    <td></td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>10</td>
    <td></td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>11</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>12</td>
    <td></td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>13</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>8</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>9</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>10</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>47</td>
    <td>41</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>48</td>
    <td>42</td>
    <td><pre>        <span class="nx">fade_out_hatch_instructions</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>49</td>
    <td>43</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>44</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>45</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>46</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>47</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>48</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>49</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>50</td>
    <td>50</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="f80245570a26a515a3d52203553ba50652a9ecca">

<h2><span class="sec-num">8.3</span>
    <code>time_goes_by()</code>: Add</h2>

<div class="message-body"><p>For now, the only thing that will happen as time goes by is that the
Tamagotchi gets hungrier.  As we develop the game further, it might also
catch a disease (lose health), or become sad (if not played with
enough).</p>

<p>But for now, nothing actually happens, because we haven't said that we
want <code>time_goes_by()</code> to take place; we've only defined it.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/f80245570a26a515a3d52203553ba50652a9ecca"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/f80245570a26a515a3d52203553ba50652a9ecca"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>47</td>
    <td>47</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>48</td>
    <td>48</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>49</td>
    <td>49</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>50</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>51</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>52</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>53</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>54</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>50</td>
    <td>55</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="651ac6cead2b2445859f8000bb7d2891ffe8adcd">

<h2><span class="sec-num">8.4</span>
    Make Tamagotchi hungrier 2" after hatching</h2>

<div class="message-body"><p>This is a more natural place to set up this timer.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/651ac6cead2b2445859f8000bb7d2891ffe8adcd"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/651ac6cead2b2445859f8000bb7d2891ffe8adcd"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>40</td>
    <td>40</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>41</td>
    <td>41</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>42</td>
    <td>42</td>
    <td><pre>        <span class="nx">fade_out_hatch_instructions</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>43</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>43</td>
    <td>44</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>44</td>
    <td>45</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>45</td>
    <td>46</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="19dbc2a6add2dcd38a9a1c15d10b8254bfbee875">

<h2><span class="sec-num">8.5</span>
    Make time keep going by</h2>

<div class="message-body"><p>The <code>setTimeout</code> function sets up a once-off timer.  We want game time
to keep ticking, so we request a new timer each time.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/19dbc2a6add2dcd38a9a1c15d10b8254bfbee875"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/19dbc2a6add2dcd38a9a1c15d10b8254bfbee875"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>52</td>
    <td>52</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>53</td>
    <td>53</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>54</td>
    <td>54</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>55</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>56</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>55</td>
    <td>57</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>56</td>
    <td>58</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="3374e1842b6f70e4717a8cf2be1148b1174920a9">

<h2><span class="sec-num">8.6</span>
    <code>alien_is_alive()</code>: Add</h2>

<div class="message-body"><p>We need to know if the Tamagotchi has got so hungry that it dies of
starvation.  To check this, we define a new function.  This function is
different to the ones we've writtem so far, because it gives back a
piece of information to the caller.  This is known as 'returning' the
information.  Here, the information is whether the Tamagotchi is still
alive, and JavaScript has the idea of a <em>Boolean</em> value for this &mdash;
a value which is either <em>true</em> or <em>false</em>.  In our case, whether the
Tamagotchi is alive is worked out by asking 'is its hungriness less than
100?'.</p>

<p>Nothing uses this function yet, though.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/3374e1842b6f70e4717a8cf2be1148b1174920a9"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/3374e1842b6f70e4717a8cf2be1148b1174920a9"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>13</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>14</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>15</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="51b10877c55890bd7e5e924d9f735b5b85c0da7f">

<h2><span class="sec-num">8.7</span>
    If the alien is not alive, stop time</h2>

<div class="message-body"><p>To make the game stop once the Tamagotchi has become too hungry, we only
set up another timer if it's still alive.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/51b10877c55890bd7e5e924d9f735b5b85c0da7f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/51b10877c55890bd7e5e924d9f735b5b85c0da7f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>58</td>
    <td>58</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>59</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>60</td>
    <td>60</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>61</td>
    <td></td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>65</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>66</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="fc310c87792f3f8482b94ed2ad40fb66e860ab27">

<h2><span class="sec-num">8.8</span>
    Add 'messages' paragraph to HTML</h2>

<div class="message-body"><p>At the start of the game, this <code>&lt;p&gt;</code> is empty.  We will use it to show
messages from the JavaScript code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/fc310c87792f3f8482b94ed2ad40fb66e860ab27"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/fc310c87792f3f8482b94ed2ad40fb66e860ab27"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>18</td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>21</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>23</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>24</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="7e52584d58186e9ed0a44493262febb83dc2561d">

<h2><span class="sec-num">8.9</span>
    Show sad message if Tamagotchi dies</h2>

<div class="message-body"><p>We currently check whether the Tamagotchi is still alive, and keep the
game going if so.  Now we add some code to give the behaviour if the
Tamagotchi is <em>not</em> still alive &mdash; we show a sad message using our
<code>messages</code> paragraph.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/7e52584d58186e9ed0a44493262febb83dc2561d"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/7e52584d58186e9ed0a44493262febb83dc2561d"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>62</td>
    <td>62</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>63</td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>64</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>69</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>70</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="a4d72f8307f5c6e04bcce4ee401090d9a7e17024">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">9</span>
    Give player a way to feed the Tamagotchi</h2>

<div class="message-body"><p>So far the game is not very fair, because all that happens is the
Tamagotchi gets hungrier and hungrier until it dies.  We'll add a button
the player can click to feed it some bread, which reduces its hungriness
levels.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a4d72f8307f5c6e04bcce4ee401090d9a7e17024"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a4d72f8307f5c6e04bcce4ee401090d9a7e17024"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>33</td>
    <td>33</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>34</td>
    <td>34</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_out_hatch_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>35</td>
    <td>35</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>36</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">fade_in_levels_display</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>36</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">fade_in_playing_sections</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>37</td>
    <td>37</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>38</td>
    <td>38</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>39</td>
    <td></td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_levels_display</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>39</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_playing_sections</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>40</td>
    <td>40</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>41</td>
    <td>41</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#levels&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>42</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#action-buttons&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>42</td>
    <td>43</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>43</td>
    <td>44</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>44</td>
    <td>45</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien_fade_instructions</span><span class="p">()</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>54</td>
    <td>55</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>55</td>
    <td>56</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>56</td>
    <td>57</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>58</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>59</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">20</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>57</td>
    <td>71</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>58</td>
    <td>72</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>73</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>19</td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>21</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>23</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>24</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>25</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>26</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>27</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>28</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="bd76222ab9606678c6d94d34eee7cb4bd3ad2dee">

<h2><span class="sec-num">9.1</span>
    Add button to give bread to Tamagotchi</h2>

<div class="message-body"><p>We'll add a way for the player to feed the Tamagotchi.  Looking ahead a
bit, we'll need to add more than one button, so we'll add a <code>&lt;p&gt;</code> to
hold them all, and add it below the levels displays</p>

<p>Then, we'll use the HTML <code>&lt;button&gt;</code> element to create the actual button.</p>

<p>This doesn't look right yet, because it should be hidden at the start of
the game.  We'll fix that next.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/bd76222ab9606678c6d94d34eee7cb4bd3ad2dee"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/bd76222ab9606678c6d94d34eee7cb4bd3ad2dee"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>19</td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>21</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>23</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>24</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>25</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>26</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>27</td>
    <td><pre>  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>28</td>
    <td><pre><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="4a5c88a7b82e315b3f1f4b5b8976a1a01f79eb17">

<h2><span class="sec-num">9.2</span>
    Hide action-buttons bar at start-up</h2>

<div class="message-body"><p>Using the same idea as for the levels display, we don't want to display
the action buttons at the start of the game.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/4a5c88a7b82e315b3f1f4b5b8976a1a01f79eb17"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/4a5c88a7b82e315b3f1f4b5b8976a1a01f79eb17"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="a8dd6190723e5bfeaf1316b13a53dfea74b495b1">

<h2><span class="sec-num">9.3</span>
    Fade in action buttons with levels display</h2>

<div class="message-body"><p>We add a second call to <code>fadeIn</code>, for the <code>action-buttons</code> element.  The
two fade-in animations happen at the same time, which is
appropriate.  (If we wanted one to fade in and then the other, we'd add
extra arguments to the first <code>fadeIn</code> call, like we did to make the
displays fade in after the hatch instructions had finished fading out.)</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a8dd6190723e5bfeaf1316b13a53dfea74b495b1"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a8dd6190723e5bfeaf1316b13a53dfea74b495b1"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>39</td>
    <td>39</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_levels_display</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>40</td>
    <td>40</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>41</td>
    <td>41</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#levels&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>42</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#action-buttons&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>42</td>
    <td>43</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>43</td>
    <td>44</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>44</td>
    <td>45</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien_fade_instructions</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="7c5f5c1ee93dd25ac08debeb75ceb702a52d7907">

<h2><span class="sec-num">9.4</span>
    Rename <code>fade_in_levels_display()</code></h2>

<div class="message-body"><p>Another small piece of refactoring: Rename this function to
<code>fade_in_playing_sections()</code>.  This is a better summary of what it does,
and makes the code easier to read and understand.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/7c5f5c1ee93dd25ac08debeb75ceb702a52d7907"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/7c5f5c1ee93dd25ac08debeb75ceb702a52d7907"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>33</td>
    <td>33</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>34</td>
    <td>34</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_out_hatch_instructions</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>35</td>
    <td>35</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>36</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">fade_in_levels_display</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>36</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch-instructions&#39;</span><span class="p">).</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="nx">fade_in_playing_sections</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>37</td>
    <td>37</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>38</td>
    <td>38</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>39</td>
    <td></td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_levels_display</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>39</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">fade_in_playing_sections</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>40</td>
    <td>40</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>41</td>
    <td>41</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#levels&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>42</td>
    <td>42</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#action-buttons&#39;</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="563c3174cafc2a567c4d424a210f8f27b5be4bf9">

<h2><span class="sec-num">9.5</span>
    Style the action-buttons bar</h2>

<div class="message-body"><p>The default appearance of the button is a bit drab, so add a small bit
of styling to fix this.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/563c3174cafc2a567c4d424a210f8f27b5be4bf9"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/563c3174cafc2a567c4d424a210f8f27b5be4bf9"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>5</td>
    <td></td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>6</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="acf124f0bafe7e3c5db422e62dd2a9b1afbde759">

<h2><span class="sec-num">9.6</span>
    Add some room round the actual action button</h2>

<div class="message-body"><p>The strip of action buttons would look better with some room at the top
and bottom of the actual button.  Add this with a <code>margin</code>.  The CSS
specifier means 'any <code>button</code> within the <code>action-buttons</code> element', to
make sure we don't accidentally affect other buttons.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/acf124f0bafe7e3c5db422e62dd2a9b1afbde759"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/acf124f0bafe7e3c5db422e62dd2a9b1afbde759"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="5e792c06963921da66bc885c84ba75ba94aa02c7">

<h2><span class="sec-num">9.7</span>
    <code>feed_alien_some_bread()</code>: Add</h2>

<div class="message-body"><p>When the player feeds the Tamagotchi some bread, the hungriness should
go down.  Shortly we will connect this function to the 'Bread' button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/5e792c06963921da66bc885c84ba75ba94aa02c7"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/5e792c06963921da66bc885c84ba75ba94aa02c7"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>55</td>
    <td>55</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>56</td>
    <td>56</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>57</td>
    <td>57</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>58</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>59</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">20</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>58</td>
    <td>64</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>65</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>60</td>
    <td>66</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="d2c527ae30a380492bf1ea539726e3f56251499f">

<h2><span class="sec-num">9.8</span>
    Trigger <code>feed_alien_some_bread()</code> on button click</h2>

<div class="message-body"><p>Connect the 'bread' button (identified by its <code>id</code>) to the new function
we just wrote.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/d2c527ae30a380492bf1ea539726e3f56251499f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/d2c527ae30a380492bf1ea539726e3f56251499f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>61</td>
    <td>61</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>62</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>63</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>66</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>67</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>68</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="acfc91ef96987b95500f42c9b5f9401c6011b92a">

<h2><span class="sec-num">9.9</span>
    Make sure hungriness doesn't become negative</h2>

<div class="message-body"><p>There's a bug!  You can make the Tamagotchi very UN-hungry by repeatedly
feeding it bread.  The hungriness can become very negative, which
doesn't make sense.  We'll fix this now.</p>

<p>After reducing the hungriness, we check whether we've reduced it so far
that it's become less than zero.  If so, change it to be zero.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/acfc91ef96987b95500f42c9b5f9401c6011b92a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/acfc91ef96987b95500f42c9b5f9401c6011b92a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>58</td>
    <td>58</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>59</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>60</td>
    <td>60</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">20</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>61</td>
    <td>66</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>67</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>68</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="8a26b4af3d20364dd8bcdb5fe657d56a3da1cda7">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">10</span>
    Allow choice of feeding bread or sweets</h2>

<div class="message-body"><p>So far the player can only feed bread to the Tamagotchi.  We will give
the player the choice of feeding sweets instead, by adding another
button and writing a new function.  We can then notice that the
bread-feeding function and the sweets-feeding function are very similar,
so we can <em>refactor</em> by writing a general function to feed either food.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/8a26b4af3d20364dd8bcdb5fe657d56a3da1cda7"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/8a26b4af3d20364dd8bcdb5fe657d56a3da1cda7"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>55</td>
    <td>55</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>56</td>
    <td>56</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>57</td>
    <td>57</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>58</td>
    <td></td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>58</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>59</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>60</td>
    <td></td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">20</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>61</td>
    <td>61</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>62</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>63</td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>66</td>
    <td>66</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>67</td>
    <td>67</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>68</td>
    <td>68</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>69</td>
    <td>74</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>70</td>
    <td>75</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_sweets</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>80</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>81</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>82</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>71</td>
    <td>83</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>72</td>
    <td>84</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>73</td>
    <td>85</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>21</td>
    <td>21</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>24</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>25</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>26</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>26</td>
    <td>27</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="499a7c033ed1c0656b13c5d882c23592c3b55de9">

<h2><span class="sec-num">10.1</span>
    Add button to give Tamagotchi sweets</h2>

<div class="message-body"><p>Within our paragraph of 'action buttons', add a '<em>Sweets</em>' button with
its own <code>id</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/499a7c033ed1c0656b13c5d882c23592c3b55de9"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/499a7c033ed1c0656b13c5d882c23592c3b55de9"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>21</td>
    <td>21</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>24</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>25</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>26</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>26</td>
    <td>27</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="6546734f775f5ce8018eaa4efe7f1e7f92d0e97d">

<h2><span class="sec-num">10.2</span>
    <code>feed_alien_sweets()</code>: Add</h2>

<div class="message-body"><p>We can copy-and-paste the code from the <code>feed_alien_some_bread()</code>
function to describe what to do to feed the Tamagotchi sweets.  The only
difference is that sweets only reduce the hungriness by 10, not 20.</p>

<p>This is untidy, though, and makes our code more difficult to maintain
and change, so we will fix this near-repetition shortly.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/6546734f775f5ce8018eaa4efe7f1e7f92d0e97d"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/6546734f775f5ce8018eaa4efe7f1e7f92d0e97d"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>68</td>
    <td>68</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>69</td>
    <td>69</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>70</td>
    <td>70</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_sweets</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">10</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>80</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>71</td>
    <td>81</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>72</td>
    <td>82</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>73</td>
    <td>83</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="009f78c6d9c7e938952846a12fa98d337b1f449a">

<h2><span class="sec-num">10.3</span>
    Connect 'sweets' button to feed<em>alien</em>sweets()</h2>

<div class="message-body"><p>This is familiar by now &mdash; declare that we want the
<code>feed_alien_sweets</code> function to be run when the '<em>Sweets</em>' button is
clicked.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/009f78c6d9c7e938952846a12fa98d337b1f449a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/009f78c6d9c7e938952846a12fa98d337b1f449a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>78</td>
    <td>78</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>79</td>
    <td>79</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>80</td>
    <td>80</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>81</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>82</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>83</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>84</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>85</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>86</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="dae5e2680a71607159e52f45be30dfbd42c777da">

<h2><span class="sec-num">10.4</span>
    <code>feed_alien()</code>: Add</h2>

<div class="message-body"><p>We can extract the common behaviour between the very similar functions</p>

<ul>
<li><code>feed_alien_some_bread()</code></li>
<li><code>feed_alien_sweets()</code></li>
</ul>

<p>and at the same time notice that the only difference is the reduction in
hungriness that happens.  So we include an argument which will allow the
caller to provide this piece of information.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/dae5e2680a71607159e52f45be30dfbd42c777da"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/dae5e2680a71607159e52f45be30dfbd42c777da"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>55</td>
    <td>55</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>56</td>
    <td>56</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>57</td>
    <td>57</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>58</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>59</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>58</td>
    <td>69</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>70</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>60</td>
    <td>71</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">20</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="8723e9e5ff6f52746149986962bbe42c9f27d0ba">

<h2><span class="sec-num">10.5</span>
    Simplify alien-feeding functions</h2>

<div class="message-body"><p>We can now get rid of the near-duplicated code between the two feeding
functions, and instead just call our new <code>feed_alien()</code> function.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/8723e9e5ff6f52746149986962bbe42c9f27d0ba"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/8723e9e5ff6f52746149986962bbe42c9f27d0ba"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>68</td>
    <td>68</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>69</td>
    <td>69</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>70</td>
    <td>70</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>71</td>
    <td></td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">20</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>72</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-del">
    <td>73</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>74</td>
    <td></td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>75</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>76</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>77</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>78</td>
    <td>72</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>79</td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>80</td>
    <td>74</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>75</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>76</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_sweets</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>77</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>84</td>
    <td></td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="mi">10</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>85</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-del">
    <td>86</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>87</td>
    <td></td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>88</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>89</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>90</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>91</td>
    <td>79</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>92</td>
    <td>80</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>93</td>
    <td>81</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="b897d9502bef963cceefa140a5d98d42f8936d2f">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">11</span>
    Stop the player hammering the feeding buttons</h2>

<div class="message-body"><p>At the moment, the player can just keep clicking the <em>Bread</em>
and <em>Sweets</em> buttons as quickly as they like, which makes the game too
easy.  We will make it so the feeding buttons are disabled for a short
while after being clicked.</p>

<p>Because we want this behaviour for both buttons, we'll write a function
for it, and then use it for both the buttons.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/b897d9502bef963cceefa140a5d98d42f8936d2f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/b897d9502bef963cceefa140a5d98d42f8936d2f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>66</td>
    <td>66</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>67</td>
    <td>67</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>68</td>
    <td>68</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">temporarily_disable</span><span class="p">(</span><span class="nx">button_id</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="nx">button_id</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre>            <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="nx">button_id</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="p">},</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>            <span class="mi">3000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>69</td>
    <td>77</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>70</td>
    <td>78</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>71</td>
    <td>79</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>80</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>72</td>
    <td>81</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>73</td>
    <td>82</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>74</td>
    <td>83</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>76</td>
    <td>85</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_sweets</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>77</td>
    <td>86</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>78</td>
    <td>87</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>88</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>79</td>
    <td>89</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>80</td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>91</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="9d39f6aa30f75192aa421157b3e330f79b1a285d">

<h2><span class="sec-num">11.1</span>
    Disable 'bread' button after clicked</h2>

<div class="message-body"><p>As part of what happens when the player clicks the 'Bread' button, we
disable that button.  This is done by setting the <code>disabled</code> <em>attribute</em>
to <code>true</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/9d39f6aa30f75192aa421157b3e330f79b1a285d"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/9d39f6aa30f75192aa421157b3e330f79b1a285d"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>69</td>
    <td>69</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>70</td>
    <td>70</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>71</td>
    <td>71</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre>        <span class="c1">// The player can&#39;t immediately give more bread</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>72</td>
    <td>75</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>73</td>
    <td>76</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>74</td>
    <td>77</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="e66cd1a67617779e2e3cd7249c1343e63d214c90">

<h2><span class="sec-num">11.2</span>
    <code>enable_bread_button()</code>: Add</h2>

<div class="message-body"><p>Disabling the button is a good start, but we'll need to re-enable it
again after a delay.  Start by creating a function which turns off the
<code>disabled</code> attribute.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e66cd1a67617779e2e3cd7249c1343e63d214c90"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e66cd1a67617779e2e3cd7249c1343e63d214c90"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>55</td>
    <td>55</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>56</td>
    <td>56</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>57</td>
    <td>57</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>58</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">enable_bread_button</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>59</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>58</td>
    <td>63</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>64</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>60</td>
    <td>65</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="dc7c025a98a86b83d6f8370ec6c1e41760469b0e">

<h2><span class="sec-num">11.3</span>
    Re-enable bread button after 3" delay</h2>

<div class="message-body"><p>Immediately after disabling the button, set a timer so that our new
function is called after a 3-second delay.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/dc7c025a98a86b83d6f8370ec6c1e41760469b0e"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/dc7c025a98a86b83d6f8370ec6c1e41760469b0e"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>77</td>
    <td>77</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>78</td>
    <td>78</td>
    <td><pre>        <span class="c1">// The player can&#39;t immediately give more bread</span></pre></td></tr>
  <tr class="diff-unch">
    <td>79</td>
    <td>79</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>80</td>
    <td><pre>        <span class="c1">//</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>81</td>
    <td><pre>        <span class="c1">// but after a few seconds have gone by, they can.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>82</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">enable_bread_button</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>80</td>
    <td>83</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>84</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>85</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="b9922a64fbcfe11c2e58a77535ee78f90c4c6fa4">

<h2><span class="sec-num">11.4</span>
    <code>temporarily_disable()</code>: Add</h2>

<div class="message-body"><p>We are going to want to apply the same 'disable then re-enable'
behaviour to the 'feed sweets' button, so make this into a function.
One wrinkle is that we can't (directly) define a general equivalent of
the <code>enable_bread_button()</code> function, so instead we'll use an <em>anonymous
function</em> in the <code>setTimeout()</code> call.</p>

<p>Our new function needs to know which button to work with, so this is the
argument &mdash; callers will pass something like <code>'#feed-bread'</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/b9922a64fbcfe11c2e58a77535ee78f90c4c6fa4"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/b9922a64fbcfe11c2e58a77535ee78f90c4c6fa4"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>71</td>
    <td>71</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>72</td>
    <td>72</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>73</td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">temporarily_disable</span><span class="p">(</span><span class="nx">button_id</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="nx">button_id</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>            <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="nx">button_id</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span> <span class="p">},</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre>            <span class="mi">3000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>80</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>81</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>74</td>
    <td>82</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>75</td>
    <td>83</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>76</td>
    <td>84</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="f10e60c8d5fc72d654fbaeb082291e5f2de10e86">

<h2><span class="sec-num">11.5</span>
    Simplify <code>feed_alien_some_bread()</code></h2>

<div class="message-body"><p>We can now replace the disable/enable logic in <code>feed_alien_some_bread()</code>
with a call to our new <code>temporarily_disable()</code> function.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/f10e60c8d5fc72d654fbaeb082291e5f2de10e86"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/f10e60c8d5fc72d654fbaeb082291e5f2de10e86"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>82</td>
    <td>82</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>83</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>84</td>
    <td>84</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>85</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>86</td>
    <td></td>
    <td><pre>        <span class="c1">// The player can&#39;t immediately give more bread</span></pre></td></tr>
  <tr class="diff-del">
    <td>87</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>88</td>
    <td></td>
    <td><pre>        <span class="c1">//</span></pre></td></tr>
  <tr class="diff-del">
    <td>89</td>
    <td></td>
    <td><pre>        <span class="c1">// but after a few seconds have gone by, they can.</span></pre></td></tr>
  <tr class="diff-del">
    <td>90</td>
    <td></td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">enable_bread_button</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>85</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>91</td>
    <td>86</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>92</td>
    <td>87</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>93</td>
    <td>88</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="957b775d6b88a2d0fa2de29b9e65db54a37af322">

<h2><span class="sec-num">11.6</span>
    Remove now-unused <code>enable_bread_button()</code></h2>

<div class="message-body"><p>We are no longer using the <code>enable_bread_button()</code> function, so remove
it.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/957b775d6b88a2d0fa2de29b9e65db54a37af322"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/957b775d6b88a2d0fa2de29b9e65db54a37af322"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>55</td>
    <td>55</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>56</td>
    <td>56</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>57</td>
    <td>57</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>58</td>
    <td></td>
    <td><pre>    <span class="kd">function</span> <span class="nx">enable_bread_button</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-del">
    <td>59</td>
    <td></td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>60</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>61</td>
    <td></td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>62</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>58</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>59</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>60</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="aa0c7e0510105c940818a200639116060133444d">

<h2><span class="sec-num">11.7</span>
    Temporarily disable sweets button too</h2>

<div class="message-body"><p>It's now easy to use our <code>temporarily_disable()</code> function to give the
behaviour we want to the <em>Sweets</em> button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/aa0c7e0510105c940818a200639116060133444d"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/aa0c7e0510105c940818a200639116060133444d"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>85</td>
    <td>85</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_sweets</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>86</td>
    <td>86</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>87</td>
    <td>87</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>88</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>88</td>
    <td>89</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>89</td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>90</td>
    <td>91</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="f7aa1df8073b247baaf4f4faa107cfe512f8468b">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">12</span>
    Sweets are not healthy</h2>

<div class="message-body"><p>As we all know, it's bad for you to eat too many sweets.  We'll add code
to keep track of how healthy the Tamagotchi is, and make it so that
sweets reduce its health.</p>

<p>If the Tamagotchi becomes too unhealthy, it dies and you lose the game.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/f7aa1df8073b247baaf4f4faa107cfe512f8468b"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/f7aa1df8073b247baaf4f4faa107cfe512f8468b"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>8</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>9</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>10</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>10</td>
    <td></td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>12</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>86</td>
    <td>87</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>87</td>
    <td>88</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>88</td>
    <td>89</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>91</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>92</td>
    <td><pre>        <span class="nx">health</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>93</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>94</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>95</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>96</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>97</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>98</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>89</td>
    <td>99</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>90</td>
    <td>100</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>91</td>
    <td>101</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>92</td>
    <td>102</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>103</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>104</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>105</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>106</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>107</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>93</td>
    <td>108</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>94</td>
    <td>109</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>95</td>
    <td>110</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>100</td>
    <td>115</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>101</td>
    <td>116</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-unch">
    <td>102</td>
    <td>117</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>103</td>
    <td></td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>118</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>104</td>
    <td>119</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>105</td>
    <td>120</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>106</td>
    <td>121</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="cc39c2ddb593f61d53c988ab2d75c12903e791e3">

<h2><span class="sec-num">12.1</span>
    Add 'health' variable</h2>

<div class="message-body"><p>We need a variable so that the JavaScript code can keep track of the
Tamagotchi's health.  We'll define this near the top, where 'hungriness'
is already defined.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/cc39c2ddb593f61d53c988ab2d75c12903e791e3"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/cc39c2ddb593f61d53c988ab2d75c12903e791e3"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>4</td>
    <td>4</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>8</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>9</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>10</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="7a931bcfb143730c7d7abd0f4f798aebb11bf271">

<h2><span class="sec-num">12.2</span>
    Make sweets reduce the Tamagotchi's health</h2>

<div class="message-body"><p>As part of what happens when the player feeds the Tamagotchi some
sweets, we want to reduce its health.  In the same way as we handled the
hungriness, there are two parts:</p>

<ul>
<li>Update the <code>health</code> variable.</li>
<li>Update the displays in the web page with the new value.</li>
</ul>

<p>There is a <code>TODO</code> to remind us to do something: in this case, we want to
check whether the Tamagotchi is so unhealthy that it dies.  We'll fill
this in later.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/7a931bcfb143730c7d7abd0f4f798aebb11bf271"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/7a931bcfb143730c7d7abd0f4f798aebb11bf271"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>87</td>
    <td>87</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>88</td>
    <td>88</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>89</td>
    <td>89</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>91</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>92</td>
    <td><pre>        <span class="nx">health</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>93</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>94</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>95</td>
    <td><pre>        <span class="c1">// TODO: Make the alien die if all health gone.</span></pre></td></tr>
  <tr class="diff-unch">
    <td>90</td>
    <td>96</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>91</td>
    <td>97</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>92</td>
    <td>98</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="dc08ad8292d7a7ba63aacdf91ee2e77d6195aae4">

<h2><span class="sec-num">12.3</span>
    <code>game_over_lost()</code>: Add</h2>

<div class="message-body"><p>There's already one way the player can lose the game: if the Tamagotchi
gets too hungry.  Shortly there's going to be another way: if the
Tamagotchi becomes too unhealthy.  We'll move the 'lose game' behaviour
into its own function, for re-use shortly.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/dc08ad8292d7a7ba63aacdf91ee2e77d6195aae4"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/dc08ad8292d7a7ba63aacdf91ee2e77d6195aae4"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>97</td>
    <td>97</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>98</td>
    <td>98</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>99</td>
    <td>99</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>100</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>101</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>102</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>103</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>104</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>100</td>
    <td>105</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>101</td>
    <td>106</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>102</td>
    <td>107</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="830b911675819e2243e10ed2057f9cea0c0111fd">

<h2><span class="sec-num">12.4</span>
    Use new <code>game_over_lost()</code> function</h2>

<div class="message-body"><p>In <code>time_goes_by()</code>, use the new function.  This is a refactoring, as no
behaviour is changed.  Instead we're making the code easier to work with
and understand.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/830b911675819e2243e10ed2057f9cea0c0111fd"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/830b911675819e2243e10ed2057f9cea0c0111fd"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>112</td>
    <td>112</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>113</td>
    <td>113</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-unch">
    <td>114</td>
    <td>114</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>115</td>
    <td></td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>115</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>116</td>
    <td>116</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>117</td>
    <td>117</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>118</td>
    <td>118</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="3fc7cb6a17f4162a1154fb2314b3aae3ece60452">

<h2><span class="sec-num">12.5</span>
    Tamagotchi needs positive 'health' to be alive</h2>

<div class="message-body"><p>The <code>&amp;&amp;</code> means 'and' &mdash; the alien is alive if it's not too hungry
<em>and</em> it's healthy enough.  This sort of works, except the game doesn't
notice the alien is too unhealthy straight away.  We will fix this next.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/3fc7cb6a17f4162a1154fb2314b3aae3ece60452"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/3fc7cb6a17f4162a1154fb2314b3aae3ece60452"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>11</td>
    <td></td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="eff681cbc097a6e7a8af7aa2f38673768b95ec4e">

<h2><span class="sec-num">12.6</span>
    Lose game if Tamagotchi loses all its health</h2>

<div class="message-body"><p>We can now do our <code>TODO</code>.  If the alien isn't alive, show the game-over
message straight away, without waiting for the next <code>time_goes_by()</code>
call.  The exclamation mark <code>!</code> means 'not'.  I've put spaces round it
to make sure a human reader notices it.</p>

<p>This isn't perfect, as the hungriness ticks up one more time after the
game-over message appears, but we look at fixing that later.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/eff681cbc097a6e7a8af7aa2f38673768b95ec4e"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/eff681cbc097a6e7a8af7aa2f38673768b95ec4e"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>92</td>
    <td>92</td>
    <td><pre>        <span class="nx">health</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>93</td>
    <td>93</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>94</td>
    <td>94</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>95</td>
    <td></td>
    <td><pre>        <span class="c1">// TODO: Make the alien die if all health gone.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>95</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>96</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>97</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>98</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>96</td>
    <td>99</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>97</td>
    <td>100</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>98</td>
    <td>101</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="a1c565a80d1fc6e96e2a1e07073cb811acde5aaa">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">13</span>
    Improve end-of-game behaviour</h2>

<div class="message-body"><p>To fix the problem noted previously, where the Tamagotchi gets hungrier
after dying through sickness, we need to check whether the game is still
running before doing anything which changes the state of the game.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a1c565a80d1fc6e96e2a1e07073cb811acde5aaa"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a1c565a80d1fc6e96e2a1e07073cb811acde5aaa"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_is_running</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>        <span class="k">return</span> <span class="nx">alien_is_alive</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>19</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>20</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>21</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>77</td>
    <td>82</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>78</td>
    <td>83</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>79</td>
    <td>84</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>85</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>86</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>87</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>80</td>
    <td>88</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>89</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>90</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>85</td>
    <td>93</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>86</td>
    <td>94</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_sweets</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>87</td>
    <td>95</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>96</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>97</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>98</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>88</td>
    <td>99</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>89</td>
    <td>100</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>90</td>
    <td>101</td>
    <td><pre></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>107</td>
    <td>118</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>108</td>
    <td>119</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>109</td>
    <td>120</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>121</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>122</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>123</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>110</td>
    <td>124</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>111</td>
    <td>125</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>112</td>
    <td>126</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="c141571ea267a883305992154779f4c544ad9536">

<h2><span class="sec-num">13.1</span>
    <code>game_is_running()</code>: Add</h2>

<div class="message-body"><p>Looking ahead a bit, the player will be able to win the game by
nurturing their Tamagotchi to old age.  We therefore need a function
which tells us whether the game is still running.  (The alternative
being that it has stopped, either through the player losing or through
the player winning.)</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/c141571ea267a883305992154779f4c544ad9536"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/c141571ea267a883305992154779f4c544ad9536"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_is_running</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>        <span class="k">return</span> <span class="nx">alien_is_alive</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>19</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>20</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>21</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="ced2cc5783012fc2eff033c552839a28824d4079">

<h2><span class="sec-num">13.2</span>
    Do not update game state if game is not running</h2>

<div class="message-body"><p>Once the game has stopped, clicking on buttons shouldn't do anything,
and the 'time goes by' function shouldn't do anything either.  To
achieve this, we check whether <code>game_is_running()</code> as the first thing we
do on entering these functions:</p>

<ul>
<li><code>feed_alien_some_bread()</code></li>
<li><code>feed_alien_sweets()</code></li>
<li><code>time_goes_by()</code></li>
</ul>

<p>If the game isn't running, we <code>return</code> straight away, which means we
don't do any more of the instructions in that function.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/ced2cc5783012fc2eff033c552839a28824d4079"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/ced2cc5783012fc2eff033c552839a28824d4079"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>82</td>
    <td>82</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>83</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_some_bread</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>84</td>
    <td>84</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>85</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>86</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>87</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>85</td>
    <td>88</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>86</td>
    <td>89</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>87</td>
    <td>90</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>90</td>
    <td>93</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>91</td>
    <td>94</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien_sweets</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>92</td>
    <td>95</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>96</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>97</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>98</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>93</td>
    <td>99</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>94</td>
    <td>100</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>95</td>
    <td>101</td>
    <td><pre></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>112</td>
    <td>118</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>113</td>
    <td>119</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>114</td>
    <td>120</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>121</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>122</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>123</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>115</td>
    <td>124</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>116</td>
    <td>125</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>117</td>
    <td>126</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="385b17df1f42372542b0f5d837ea9ca8d369999e">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">14</span>
    Random illnesses</h2>

<div class="message-body"><p>Occasionally, the Tamagotchi gets sick just through bad luck.  We
already have a function to make things happen every 'tick' of the game
clock, so we can add a 'randomly make sicker' feature to it.  The
randomness comes from JavaScript's <code>Math.random()</code> function, and to keep
the code easy to read, we'll put this into a separate new function.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/385b17df1f42372542b0f5d837ea9ca8d369999e"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/385b17df1f42372542b0f5d837ea9ca8d369999e"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>61</td>
    <td>61</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>62</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>63</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">maybe_make_alien_sicker</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>            <span class="nx">health</span> <span class="o">-=</span> <span class="mi">40</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>                <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>                <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>80</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>81</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>82</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>83</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>84</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>85</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>122</td>
    <td>141</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>123</td>
    <td>142</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>124</td>
    <td>143</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>144</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>125</td>
    <td>145</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>126</td>
    <td>146</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>127</td>
    <td>147</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="113a920ee71df7acc8f48808c058390b2aa8279c">

<h2><span class="sec-num">14.1</span>
    <code>maybe_make_alien_sicker()</code>: Add skeleton</h2>

<div class="message-body"><p>We will fill in the details in a minute, but first we set up the
structure of how to do something randomly.  JavaScript provides a
<code>Math.random()</code> function, which gives you a random number between 0 and
1 each time you call it.  By testing whether this random number is less
than 0.1 (i.e., 1/10), we can make something happen about one time in
ten that we call the function.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/113a920ee71df7acc8f48808c058390b2aa8279c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/113a920ee71df7acc8f48808c058390b2aa8279c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>61</td>
    <td>61</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>62</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>63</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">maybe_make_alien_sicker</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>            <span class="c1">// TODO: Make alien sicker</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>72</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>73</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>74</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="73177625068cc9035873ca9b5cdd1979844e7ab0">

<h2><span class="sec-num">14.2</span>
    Knock lots of health off if Tamagotchi gets sick</h2>

<div class="message-body"><p>This has the various parts we've dealt with before:</p>

<ul>
<li>Adjust the <code>health</code> variable.</li>
<li>Make sure the <code>health</code> is not less than zero.</li>
<li>Update the web page to display the new health.</li>
</ul>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/73177625068cc9035873ca9b5cdd1979844e7ab0"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/73177625068cc9035873ca9b5cdd1979844e7ab0"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>65</td>
    <td>65</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>66</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>67</td>
    <td>67</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>68</td>
    <td></td>
    <td><pre>            <span class="c1">// TODO: Make alien sicker</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>            <span class="nx">health</span> <span class="o">-=</span> <span class="mi">40</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>                <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>69</td>
    <td>75</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>70</td>
    <td>76</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>71</td>
    <td>77</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="81927d46e85ee8bf4f7c8e41770e5d75aecbf4f0">

<h2><span class="sec-num">14.3</span>
    Randomly make Tamagotchi sicker as time goes by</h2>

<div class="message-body"><p>To actually make the Tamagotchi occasionally become sick, we just have
to call our new <code>maybe_make_alien_sicker()</code> function from within the
<code>time_goes_by()</code> function.  About every 20 seconds, on average, the
Tamagotchi will get sick.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/81927d46e85ee8bf4f7c8e41770e5d75aecbf4f0"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/81927d46e85ee8bf4f7c8e41770e5d75aecbf4f0"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>136</td>
    <td>136</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>137</td>
    <td>137</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>138</td>
    <td>138</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>139</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>139</td>
    <td>140</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>140</td>
    <td>141</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>141</td>
    <td>142</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="cbeb5b1880306f540ce9b57e3a455c3de3f5fde1">

<h2><span class="sec-num">14.4</span>
    Check Tamagotchi not dead after getting sicker</h2>

<div class="message-body"><p>The final piece is to check whether this bout of sickness was fatal for
the Tamagotchi, and display the <em>you lost</em> message if so.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/cbeb5b1880306f540ce9b57e3a455c3de3f5fde1"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/cbeb5b1880306f540ce9b57e3a455c3de3f5fde1"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>72</td>
    <td>72</td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>73</td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>74</td>
    <td>74</td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>                <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>75</td>
    <td>80</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>76</td>
    <td>81</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>77</td>
    <td>82</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="580ee6490613fcef3100e59dbb21e9f901dddec1">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">15</span>
    Allow player to give medicine to the Tamagotchi</h2>

<div class="message-body"><p>It's a bit unfair on the player if the alien keeps getting sicker but
the player can't do anything about it.  We'll add a <em>Medicine</em> button
which restores some of its health.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/580ee6490613fcef3100e59dbb21e9f901dddec1"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/580ee6490613fcef3100e59dbb21e9f901dddec1"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>80</td>
    <td>80</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>81</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>82</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>83</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_healthier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>84</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>85</td>
    <td><pre>        <span class="nx">health</span> <span class="o">+=</span> <span class="mi">40</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>86</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>87</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>88</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>89</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>91</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>92</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>93</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>94</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>84</td>
    <td>95</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>85</td>
    <td>96</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>130</td>
    <td>141</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>131</td>
    <td>142</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>132</td>
    <td>143</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>144</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">give_alien_medicine</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>145</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>146</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>147</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>148</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>149</td>
    <td><pre>        <span class="nx">make_healthier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>150</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>151</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>152</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>153</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">give_alien_medicine</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>154</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>133</td>
    <td>155</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>134</td>
    <td>156</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>135</td>
    <td>157</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>24</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>25</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;give-medicine&quot;</span><span class="p">&gt;</span>Medicine<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>26</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>26</td>
    <td>27</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>27</td>
    <td>28</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="98d7528e1f0c6fa898871ee42c06dc474ec58b95">

<h2><span class="sec-num">15.1</span>
    Add 'medicine' button</h2>

<div class="message-body"><p>Add another button to the 'action buttons' bar, giving it a unique <code>id</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/98d7528e1f0c6fa898871ee42c06dc474ec58b95"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/98d7528e1f0c6fa898871ee42c06dc474ec58b95"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>22</td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>24</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>25</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;give-medicine&quot;</span><span class="p">&gt;</span>Medicine<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>26</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>26</td>
    <td>27</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>27</td>
    <td>28</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="8643cab9495c23c9a26b1c9197117aabf3a0d9a6">

<h2><span class="sec-num">15.2</span>
    make_healthier(): Add</h2>

<div class="message-body"><p>This has the same components we've seen a few times in other settings:</p>

<ul>
<li>Update the JavaScript variable <code>health</code>.</li>
<li>Check it hasn't gone outside its bounds &mdash; we can't have health
more than 100, so set to 100 if it tries to.</li>
<li>Update the web-page display.</li>
</ul>

<p>Here, the medicine gives back 40 health points, but you can experiment
with this value and see what makes a good game.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/8643cab9495c23c9a26b1c9197117aabf3a0d9a6"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/8643cab9495c23c9a26b1c9197117aabf3a0d9a6"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>80</td>
    <td>80</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>81</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>82</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>83</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_healthier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>84</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>85</td>
    <td><pre>        <span class="nx">health</span> <span class="o">+=</span> <span class="mi">40</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>86</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>87</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>88</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>89</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>91</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>92</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>93</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>94</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>84</td>
    <td>95</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>85</td>
    <td>96</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="5d67a9ad081e08d51ee57bacd25dc68e0ddc86b2">

<h2><span class="sec-num">15.3</span>
    <code>give_alien_medicine()</code>: Add</h2>

<div class="message-body"><p>Create a function which does the two things we need to do when the
player clicks the <em>Medicine</em> button:</p>

<ul>
<li>Make the Tamagotchi healthier.</li>
<li>Disable the <em>Medicine</em> button for a few seconds.</li>
</ul>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/5d67a9ad081e08d51ee57bacd25dc68e0ddc86b2"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/5d67a9ad081e08d51ee57bacd25dc68e0ddc86b2"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>141</td>
    <td>141</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>142</td>
    <td>142</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>143</td>
    <td>143</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>144</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">give_alien_medicine</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>145</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>146</td>
    <td><pre>        <span class="nx">make_healthier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>147</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>148</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>149</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>144</td>
    <td>150</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>145</td>
    <td>151</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>146</td>
    <td>152</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="adb2755f1d3b68317ace2b88321477fdacc48dd9">

<h2><span class="sec-num">15.4</span>
    Forbid giving medicine if game not running</h2>

<div class="message-body"><p>If the game isn't running, leave <code>give_alien_medicine()</code> immediately.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/adb2755f1d3b68317ace2b88321477fdacc48dd9"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/adb2755f1d3b68317ace2b88321477fdacc48dd9"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>143</td>
    <td>143</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>144</td>
    <td>144</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">give_alien_medicine</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>145</td>
    <td>145</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>146</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>147</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>148</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>146</td>
    <td>149</td>
    <td><pre>        <span class="nx">make_healthier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>147</td>
    <td>150</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>148</td>
    <td>151</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="c438cfb11c573466174d54e98d1b3680e727dd83">

<h2><span class="sec-num">15.5</span>
    Connect the 'Medicine' button</h2>

<div class="message-body"><p>Finally we ensure our new function is called when the player clicks the
button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/c438cfb11c573466174d54e98d1b3680e727dd83"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/c438cfb11c573466174d54e98d1b3680e727dd83"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>150</td>
    <td>150</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>151</td>
    <td>151</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>152</td>
    <td>152</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>153</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">give_alien_medicine</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>154</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>153</td>
    <td>155</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>154</td>
    <td>156</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>155</td>
    <td>157</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="260c6259793451cc877ad3b64d7b01e6443d7327">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">16</span>
    Create one function to make Tamagotchi sicker</h2>

<div class="message-body"><p>There is a large overlap between the code which reduces the Tamagotchi's
health when the player feeds it a sweet, and the code which reduces its
health because of random sickness.  To make the code easier to work
with, we can <em>refactor</em> by pulling that common logic out into a new
function.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/260c6259793451cc877ad3b64d7b01e6443d7327"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/260c6259793451cc877ad3b64d7b01e6443d7327"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>61</td>
    <td>61</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>62</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>63</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="nx">health_lost</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="nx">health</span> <span class="o">-=</span> <span class="nx">health_lost</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>80</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">maybe_make_alien_sicker</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>81</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>82</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>67</td>
    <td>83</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>68</td>
    <td></td>
    <td><pre>            <span class="nx">health</span> <span class="o">-=</span> <span class="mi">40</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>69</td>
    <td></td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-del">
    <td>70</td>
    <td></td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>71</td>
    <td></td>
    <td><pre>                <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>72</td>
    <td></td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>73</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>74</td>
    <td></td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>75</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>76</td>
    <td></td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>77</td>
    <td></td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>78</td>
    <td></td>
    <td><pre>                <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>79</td>
    <td></td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>84</td>
    <td><pre>            <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>80</td>
    <td>85</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>86</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>87</td>
    <td><pre></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>130</td>
    <td>135</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>131</td>
    <td>136</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>132</td>
    <td>137</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-del">
    <td>133</td>
    <td></td>
    <td><pre>        <span class="nx">health</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>134</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>135</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>136</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>137</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>138</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>139</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>138</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>140</td>
    <td>139</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>141</td>
    <td>140</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>142</td>
    <td>141</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="c02a46fa4802bf2f96cd0c47bdc96b0ef79e1476">

<h2><span class="sec-num">16.1</span>
    <code>make_alien_sicker()</code>: Add</h2>

<div class="message-body"><p>Copying the common behaviour between <code>maybe_make_alien_sicker()</code> and
<code>feed_alien_sweets()</code>, we see that the difference is in how much health
the Tamagotchi loses.  We therefore make this amount be an argument to
our new function.</p>

<p>One other difference is that we never checked for <code>health &lt; 0</code> in
<code>feed_alien_sweets()</code>, which we got away with because <code>health</code> was
always a multiple of 5.  It's no harm to check, though, and in future we
might not always have <code>health</code> being a multiple of 5.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/c02a46fa4802bf2f96cd0c47bdc96b0ef79e1476"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/c02a46fa4802bf2f96cd0c47bdc96b0ef79e1476"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>61</td>
    <td>61</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>62</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>63</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="nx">health_lost</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="nx">health</span> <span class="o">-=</span> <span class="nx">health_lost</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>80</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">maybe_make_alien_sicker</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>81</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>82</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="00e88fb1826c1fc9cbd01a7777d4a3630e476b61">

<h2><span class="sec-num">16.2</span>
    <code>maybe_make_alien_sicker()</code>: Simplify</h2>

<div class="message-body"><p>All the logic is now inside <code>make_alien_sicker()</code>, so call that (with
argument 40, because that's the amount of health we knock off when the
Tamagotchi gets a random illness).</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/00e88fb1826c1fc9cbd01a7777d4a3630e476b61"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/00e88fb1826c1fc9cbd01a7777d4a3630e476b61"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>81</td>
    <td>81</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>82</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>83</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>84</td>
    <td></td>
    <td><pre>            <span class="nx">health</span> <span class="o">-=</span> <span class="mi">40</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>85</td>
    <td></td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-del">
    <td>86</td>
    <td></td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>87</td>
    <td></td>
    <td><pre>                <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>88</td>
    <td></td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>89</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>90</td>
    <td></td>
    <td><pre>            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>91</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>92</td>
    <td></td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>93</td>
    <td></td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>94</td>
    <td></td>
    <td><pre>                <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>95</td>
    <td></td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>84</td>
    <td><pre>            <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>96</td>
    <td>85</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>97</td>
    <td>86</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>98</td>
    <td>87</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="118718318b26a5dbb71260b5b96253890f7f8316">

<h2><span class="sec-num">16.3</span>
    <code>feed_alien_sweets()</code>: Simplify</h2>

<div class="message-body"><p>Again, use the new function, passing 5 as the amount of health to lose.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/118718318b26a5dbb71260b5b96253890f7f8316"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/118718318b26a5dbb71260b5b96253890f7f8316"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>135</td>
    <td>135</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>136</td>
    <td>136</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>137</td>
    <td>137</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-del">
    <td>138</td>
    <td></td>
    <td><pre>        <span class="nx">health</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>139</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>140</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>141</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>142</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>143</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>144</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>138</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>145</td>
    <td>139</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>146</td>
    <td>140</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>147</td>
    <td>141</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="0e2383d1e2a0d3fa512f1ecf7f1be34264f15889">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">17</span>
    Make player win game if Tamagotchi reaches old age</h2>

<div class="message-body"><p>So far the game only has ways to lose, and not to win.  We'll make it so
that the player wins the game if the Tamagotchi reaches the ripe old age
of 100.  This will involve adding an 'age' display, and keeping track of
the age via a JavaScript variable.  The age needs to increase as time
goes by, and we need to check whether the Tamagotchi becomes old enough
to tell the player they've won.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/0e2383d1e2a0d3fa512f1ecf7f1be34264f15889"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/0e2383d1e2a0d3fa512f1ecf7f1be34264f15889"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>9</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>10</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>11</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>12</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>13</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>14</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_still_growing</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">age</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>20</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_is_running</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>21</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>16</td>
    <td></td>
    <td><pre>        <span class="k">return</span> <span class="nx">alien_is_alive</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>        <span class="k">return</span> <span class="nx">alien_is_alive</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">alien_still_growing</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>17</td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>18</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>25</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>96</td>
    <td>102</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>97</td>
    <td>103</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>98</td>
    <td>104</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>105</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_older</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>106</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>107</td>
    <td><pre>        <span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>108</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>109</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>110</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>99</td>
    <td>111</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>100</td>
    <td>112</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>101</td>
    <td>113</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>156</td>
    <td>168</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>157</td>
    <td>169</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>158</td>
    <td>170</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>171</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_won</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>172</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>173</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Well done!  Your Tamagotchi reached old age!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>174</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>175</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>159</td>
    <td>176</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>160</td>
    <td>177</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>161</td>
    <td>178</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>163</td>
    <td>180</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>164</td>
    <td>181</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>165</td>
    <td>182</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>183</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>166</td>
    <td>184</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>167</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>185</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>168</td>
    <td>186</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>169</td>
    <td></td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>187</td>
    <td><pre>            <span class="nx">game_over_won</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>170</td>
    <td>188</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>171</td>
    <td></td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>189</td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>172</td>
    <td>190</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>173</td>
    <td>191</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>174</td>
    <td>192</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>193</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>194</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>195</td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>196</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>175</td>
    <td>197</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>176</td>
    <td>198</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>16</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;levels&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;age-para&quot;</span><span class="p">&gt;</span>Age: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;age&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> hours<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>17</td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;health&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>18</td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>20</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre><span class="p">#</span><span class="nn">age-para</span> <span class="p">{</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="cc6812c5328a3d2d151f83e123798ac3e952134e">

<h2><span class="sec-num">17.1</span>
    Add 'age' display</h2>

<div class="message-body"><p>When first hatched, the Tamagotchi is zero hours old.  The whole <code>&lt;p&gt;</code>
has an <code>id</code>, as well as the <code>&lt;span&gt;</code> containing the value, because we'll
want to apply styling to this whole line of the display.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/cc6812c5328a3d2d151f83e123798ac3e952134e"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/cc6812c5328a3d2d151f83e123798ac3e952134e"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch&quot;</span><span class="p">&gt;</span>Hatch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>16</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;levels&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;age-para&quot;</span><span class="p">&gt;</span>Age: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;age&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> hours<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>17</td>
    <td>18</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Health: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;health&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>18</td>
    <td>19</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>19</td>
    <td>20</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="d867504b58323c1d8eece5f4c05c0c4995bba043">

<h2><span class="sec-num">17.2</span>
    Add styling for the age display</h2>

<div class="message-body"><p>The 'age' is a bit like the score for the game, so it should be more
prominent.  Make the text bold.  You could add any other styling here
too (e.g., colours).</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/d867504b58323c1d8eece5f4c05c0c4995bba043"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/d867504b58323c1d8eece5f4c05c0c4995bba043"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre><span class="p">#</span><span class="nn">age-para</span> <span class="p">{</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="e2d724e1c5fb7a34603525e8f674b3207847c5f5">

<h2><span class="sec-num">17.3</span>
    Add 'age' JavaScript variable</h2>

<div class="message-body"><p>The program will need to keep track of how old the Tamagotchi is, so add
a variable <code>age</code>.  It starts at zero, matching the display.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e2d724e1c5fb7a34603525e8f674b3207847c5f5"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e2d724e1c5fb7a34603525e8f674b3207847c5f5"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>9</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>10</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>11</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="9231f3e6c1cddf8fb8bcb103ab5462b7a1c4a80f">

<h2><span class="sec-num">17.4</span>
    <code>make_alien_older()</code>: Add</h2>

<div class="message-body"><p>Every 'tick' of the game, the Tamagotchi will get 'one hour' older.
Make a function to do this, which needs to update two things:</p>

<ul>
<li>The <code>age</code> variable.</li>
<li>The display.</li>
</ul>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/9231f3e6c1cddf8fb8bcb103ab5462b7a1c4a80f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/9231f3e6c1cddf8fb8bcb103ab5462b7a1c4a80f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>97</td>
    <td>97</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>98</td>
    <td>98</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>99</td>
    <td>99</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>100</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_older</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>101</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>102</td>
    <td><pre>        <span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>103</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>104</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>105</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>100</td>
    <td>106</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>101</td>
    <td>107</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>102</td>
    <td>108</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="09a2a71ab110d9e574f29d662fb49503263a337c">

<h2><span class="sec-num">17.5</span>
    Make Tamagotchi get older each 'tick' of the game</h2>

<div class="message-body"><p>To actually make the Tamagotchi get older, we need to call our new
<code>make_alien_older()</code> on each 'tick' of the game, i.e., within
<code>time_goes_by()</code>.</p>

<p>(One slightly annoying thing is that it says '1 hours', rather than '1
hour', but we'll ignore that.)</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/09a2a71ab110d9e574f29d662fb49503263a337c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/09a2a71ab110d9e574f29d662fb49503263a337c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>170</td>
    <td>170</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>171</td>
    <td>171</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>172</td>
    <td>172</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>173</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>173</td>
    <td>174</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>174</td>
    <td>175</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>175</td>
    <td>176</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="ffad501c9e63ec0a8f3365caf67f44adab34a67d">

<h2><span class="sec-num">17.6</span>
    <code>game_over_won()</code>: Add</h2>

<div class="message-body"><p>Make a function to announce that the player has won, to go along with
the existing <code>game_over_lost()</code> function for when they lose.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/ffad501c9e63ec0a8f3365caf67f44adab34a67d"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/ffad501c9e63ec0a8f3365caf67f44adab34a67d"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>163</td>
    <td>163</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>164</td>
    <td>164</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>165</td>
    <td>165</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>166</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_won</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>167</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>168</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Well done!  Your Tamagotchi reached old age!&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>169</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>170</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>166</td>
    <td>171</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">time_goes_by</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>167</td>
    <td>172</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>168</td>
    <td>173</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="db9aeccdceeee07ef719c7b4cdedfd0d9e58428c">

<h2><span class="sec-num">17.7</span>
    Check whether Tamagotchi has reached winning age</h2>

<div class="message-body"><p>After updating the age, we need to check if the player has won.  This
needs to fit in with the '<em>has the player lost?</em>' check, so we'll
rearrange this part of <code>time_goes_by()</code> a bit.</p>

<p>For testing, it's a good idea to use a smaller number than 100 (maybe
10), otherwise it takes an annoyingly long time to check it's working.</p>

<p>If, by coincidence, the alien reaches old age at the same time as
getting to zero health (say), we give the player the benefit of the
doubt and call it a win.  We do this by checking the age before the
<code>alien_is_alive()</code> check.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/db9aeccdceeee07ef719c7b4cdedfd0d9e58428c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/db9aeccdceeee07ef719c7b4cdedfd0d9e58428c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>177</td>
    <td>177</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>178</td>
    <td>178</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>179</td>
    <td>179</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>180</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>180</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">age</span> <span class="o">==</span> <span class="mi">100</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>181</td>
    <td>181</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>182</td>
    <td></td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>182</td>
    <td><pre>            <span class="nx">game_over_won</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>183</td>
    <td>183</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>184</td>
    <td></td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>184</td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>185</td>
    <td>185</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>186</td>
    <td>186</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>187</td>
    <td>187</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>188</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>189</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>190</td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>191</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>188</td>
    <td>192</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>189</td>
    <td>193</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="11d5d753928e8736498368d1499df202a2f49a02">

<h2><span class="sec-num">17.8</span>
    <code>alien_still_growing()</code>: Add</h2>

<div class="message-body"><p>A function which lets us tell whether the alien is still growing.  (The
alternative is that it's reached old age.)</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/11d5d753928e8736498368d1499df202a2f49a02"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/11d5d753928e8736498368d1499df202a2f49a02"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_still_growing</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>16</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>17</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">age</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>18</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>19</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>20</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_is_running</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>21</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>17</td>
    <td>22</td>
    <td><pre>        <span class="k">return</span> <span class="nx">alien_is_alive</span><span class="p">();</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="1e1f95b1b62eae5c7b581b7ee515e80d978c0763">

<h2><span class="sec-num">17.9</span>
    Declare game not running at old age</h2>

<div class="message-body"><p>When the Tamagotchi reaches old age, the game should stop running.  We
add a condition to <code>game_is_running()</code> &mdash; for the game to be
running, the alien needs to be alive <em>and</em> still growing.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/1e1f95b1b62eae5c7b581b7ee515e80d978c0763"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/1e1f95b1b62eae5c7b581b7ee515e80d978c0763"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>19</td>
    <td>19</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>20</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_is_running</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>21</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>22</td>
    <td></td>
    <td><pre>        <span class="k">return</span> <span class="nx">alien_is_alive</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>22</td>
    <td><pre>        <span class="k">return</span> <span class="nx">alien_is_alive</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">alien_still_growing</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>23</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>25</td>
    <td>25</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="828002d53408511ad4552683a3c64437ebe047fe">

<h2><span class="sec-num">17.10</span>
    Use <code>alien_still_growing()</code> in <code>time_goes_by()</code></h2>

<div class="message-body"><p>We don't want to have two places in the code where we decide whether the
alien has reached old age.  This kind of thing inevitably leads to
trouble when you change things in one place and not the other.  To avoid
this, use the <code>alien_still_growing()</code> function to decide whether the
player has won &mdash; if it's <em>not</em> still growing, the player has won.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/828002d53408511ad4552683a3c64437ebe047fe"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/828002d53408511ad4552683a3c64437ebe047fe"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>182</td>
    <td>182</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>183</td>
    <td>183</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>184</td>
    <td>184</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>185</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">age</span> <span class="o">==</span> <span class="mi">100</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>185</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>186</td>
    <td>186</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>187</td>
    <td>187</td>
    <td><pre>            <span class="nx">game_over_won</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>188</td>
    <td>188</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="758356c4fec086ab8d9063fcb4d7285769f1d829">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">18</span>
    Move levels display to right of Tamagotchi</h2>

<div class="message-body"><p>On a short screen, things don't quite fit vertically.  The title, the
Tamagotchi canvas, the levels display, the action buttons, and the
messages take up so much room that the player needs to scroll to see it
all, which is annoying.  We'll move the levels display to the right of
the Tamagotchi, giving a more useful layout.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/758356c4fec086ab8d9063fcb4d7285769f1d829"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/758356c4fec086ab8d9063fcb4d7285769f1d829"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Look after your Tamagotchi!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game-container&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>12</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>14</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch:</pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>19</td>
    <td>20</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>21</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>23</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>25</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>26</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>1</td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game-container</span> <span class="p">{</span> <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>4</td>
    <td></td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span> <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span> <span class="k">left</span><span class="p">:</span> <span class="mi">520</span><span class="kt">px</span><span class="p">;</span> <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>6</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>7</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>8</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="bb180f303450d0c3d48b4b46e943973dbd9eddba">

<h2><span class="sec-num">18.1</span>
    Wrap Tamagotchi and levels in a <code>&lt;div&gt;</code></h2>

<div class="message-body"><p>This produces no change yet, but we need the container <code>&lt;div&gt;</code> to make
the positioning work correctly.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/bb180f303450d0c3d48b4b46e943973dbd9eddba"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/bb180f303450d0c3d48b4b46e943973dbd9eddba"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Look after your Tamagotchi!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>11</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game-container&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>12</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;game&quot;</span> <span class="na">width</span><span class="o">=</span><span class="s">&quot;480&quot;</span> <span class="na">height</span><span class="o">=</span><span class="s">&quot;480&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>14</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hatch-instructions&quot;</span><span class="p">&gt;</span>Click here to make it hatch:</pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>19</td>
    <td>20</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Happiness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;happiness&quot;</span><span class="p">&gt;</span>100<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>20</td>
    <td>21</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hungriness: <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hungriness&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>21</td>
    <td>22</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>23</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>22</td>
    <td>24</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>23</td>
    <td>25</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;action-buttons&quot;</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>24</td>
    <td>26</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="c212dd9bcc6358e492456e60512fc3e587b78483">

<h2><span class="sec-num">18.2</span>
    Position levels to right of Tamagotchi</h2>

<div class="message-body"><p>The full rules for positioning using CSS are quite complex, but for this
case, the idea is:</p>

<ul>
<li>Make the container have <code>relative</code> position.  By itself this does
nothing, but means that the <code>game-container</code> div is used as a
reference for where any contained <code>absolute</code>-positioned elements go.</li>
<li>Make the <code>levels</code> display be positioned absolutely, with its left edge
just beyond the right edge of the <code>&lt;canvas&gt;</code> (which is 480px wide),
and with its top edge level with the top of the canvas.</li>
</ul>

<p>In fact the 'top' of the levels display includes its margin, so the top
of the text doesn't quite line up.  We'll put up with this.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/c212dd9bcc6358e492456e60512fc3e587b78483"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/c212dd9bcc6358e492456e60512fc3e587b78483"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>1</td>
    <td>1</td>
    <td><pre><span class="nt">body</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eee</span><span class="p">;</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>2</td>
    <td>2</td>
    <td><pre><span class="nt">h1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>3</td>
    <td><pre><span class="p">#</span><span class="nn">game-container</span> <span class="p">{</span> <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>3</td>
    <td>4</td>
    <td><pre><span class="p">#</span><span class="nn">game</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffd</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>4</td>
    <td></td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span> <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span> <span class="k">left</span><span class="p">:</span> <span class="mi">520</span><span class="kt">px</span><span class="p">;</span> <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>5</td>
    <td>6</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>7</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>8</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="66c9b646fa4d8fce3ef9b6ed6f3f470f62ac685a">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">19</span>
    Implement happiness and boredom</h2>

<div class="message-body"><p>We'll bring in the last part of the display now: happiness.  The idea is
that the Tamagotchi needs to be played with otherwise it gets bored.  If
it gets bored it starts losing happiness.  The player can play a game
with their Tamagotchi by clicking a button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/66c9b646fa4d8fce3ef9b6ed6f3f470f62ac685a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/66c9b646fa4d8fce3ef9b6ed6f3f470f62ac685a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">bored</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">last_game_age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>11</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>13</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>14</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>12</td>
    <td></td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>16</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>17</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>18</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_still_growing</span><span class="p">()</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>108</td>
    <td>111</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>109</td>
    <td>112</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>110</td>
    <td>113</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>114</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>115</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>116</td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>117</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>118</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>119</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>120</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>121</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>122</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>123</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>124</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>125</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>126</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>127</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>128</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>129</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>130</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>131</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>111</td>
    <td>132</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>112</td>
    <td>133</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>113</td>
    <td>134</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>163</td>
    <td>184</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>164</td>
    <td>185</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">give_alien_medicine</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>165</td>
    <td>186</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>187</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">play_game</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>188</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>189</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>190</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>191</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>192</td>
    <td><pre>        <span class="nx">last_game_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>193</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>194</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>195</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>196</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">play_game</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>197</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>166</td>
    <td>198</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>167</td>
    <td>199</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>168</td>
    <td>200</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>181</td>
    <td>213</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>182</td>
    <td>214</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>183</td>
    <td>215</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>216</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>184</td>
    <td>217</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>185</td>
    <td>218</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>186</td>
    <td>219</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>26</td>
    <td>26</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>27</td>
    <td>27</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;give-medicine&quot;</span><span class="p">&gt;</span>Medicine<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>29</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;play-game&quot;</span><span class="p">&gt;</span>Game<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>30</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>32</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="bfb31708f501a9ece848243e1e8225b0b536df22">

<h2><span class="sec-num">19.1</span>
    Add variable for happiness</h2>

<div class="message-body"><p>The <code>happiness</code> starts off at 100 &mdash; the Tamagotchi is perfectly
happy when freshly hatched.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/bfb31708f501a9ece848243e1e8225b0b536df22"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/bfb31708f501a9ece848243e1e8225b0b536df22"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>10</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>11</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="21bb030b583421e359046a154e564e16d5416b5c">

<h2><span class="sec-num">19.2</span>
    Add variable for whether Tamagotchi is bored</h2>

<div class="message-body"><p>The <code>bored</code> variable is a <em>Boolean</em> variable &mdash; its value is going
to be either <code>true</code> (if the Tamagotchi is bored) or <code>false</code> (if it's
not).  It starts off not bored.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/21bb030b583421e359046a154e564e16d5416b5c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/21bb030b583421e359046a154e564e16d5416b5c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">bored</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>10</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>11</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>12</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="6e9f878145d3f776719e22b024719e7a4831c2be">

<h2><span class="sec-num">19.3</span>
    Add variable to track when game last played</h2>

<div class="message-body"><p>The Tamagotchi will get bored if the player hasn't played a game with it
for too long.  To keep track of this, we'll add a variable to remember
how old the Tamagotchi was when the player last played a game with it.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/6e9f878145d3f776719e22b024719e7a4831c2be"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/6e9f878145d3f776719e22b024719e7a4831c2be"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>8</td>
    <td>8</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">bored</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>10</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">last_game_age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>11</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>13</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="9fdb59185a7b564f21e3e3cf07099a14882eb069">

<h2><span class="sec-num">19.4</span>
    <code>update_alien_happiness()</code>: Add</h2>

<div class="message-body"><p>Being bored makes the Tamagotchi less happy.  If it's not bored, it has
a generally positive outlook on life, so its happiness goes up.  We need
a function to check whether the alien is bored, and then move its
happiness up or down accordingly.  This function has to do quite a lot.</p>

<p>The main bit is the <code>((age - last_game_age) &gt;= 3)</code> test.  This
subtraction works out how long ago the alien last had a game, and if
that was three or more hours ago, it's bored.  Then we adjust the
<code>happiness</code> variable either down (if bored) or up (if not), and update
the display.  We also check that the <code>happiness</code> doesn't become less
than zero or more than 100.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/9fdb59185a7b564f21e3e3cf07099a14882eb069"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/9fdb59185a7b564f21e3e3cf07099a14882eb069"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>111</td>
    <td>111</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>112</td>
    <td>112</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>113</td>
    <td>113</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>114</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>115</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>116</td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>117</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>118</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>119</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>120</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>121</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>122</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>123</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>124</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>125</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>126</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>127</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>128</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>129</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>130</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>131</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>114</td>
    <td>132</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>115</td>
    <td>133</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>116</td>
    <td>134</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">-=</span> <span class="nx">hungriness_reduction</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="f9317c70b219b6210a89cff471dd000bb69209b2">

<h2><span class="sec-num">19.5</span>
    Check boredom and update happiness every tick</h2>

<div class="message-body"><p>To make this actually happen, we must call our new function on every
game tick.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/f9317c70b219b6210a89cff471dd000bb69209b2"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/f9317c70b219b6210a89cff471dd000bb69209b2"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>202</td>
    <td>202</td>
    <td><pre>        <span class="nx">make_alien_hungrier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>203</td>
    <td>203</td>
    <td><pre>        <span class="nx">maybe_make_alien_sicker</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>204</td>
    <td>204</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>205</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>205</td>
    <td>206</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>206</td>
    <td>207</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>207</td>
    <td>208</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="2709676a9ebd3389b148f087a55674dd83d000e6">

<h2><span class="sec-num">19.6</span>
    Add 'Game' button</h2>

<div class="message-body"><p>It would be unfair if the player had no way of playing a game with the
Tamagotchi, so add an action button for this.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/2709676a9ebd3389b148f087a55674dd83d000e6"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/2709676a9ebd3389b148f087a55674dd83d000e6"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>26</td>
    <td>26</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-bread&quot;</span><span class="p">&gt;</span>Bread<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>27</td>
    <td>27</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;give-medicine&quot;</span><span class="p">&gt;</span>Medicine<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>29</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;play-game&quot;</span><span class="p">&gt;</span>Game<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>30</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>31</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>32</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="8354f4bd7b7d764a90b4e7a8893e249d501e6cd0">

<h2><span class="sec-num">19.7</span>
    <code>play_game()</code>: Add</h2>

<div class="message-body"><p>When the player clicks the <em>Game</em> button, the code needs to record this
fact.  The variable <code>last_game_age</code> needs updating to the Tamagotchi's
current age.  We also include the usual temporary disabling of the
button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/8354f4bd7b7d764a90b4e7a8893e249d501e6cd0"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/8354f4bd7b7d764a90b4e7a8893e249d501e6cd0"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>184</td>
    <td>184</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>185</td>
    <td>185</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">give_alien_medicine</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>186</td>
    <td>186</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>187</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">play_game</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>188</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>189</td>
    <td><pre>        <span class="nx">last_game_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>190</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>191</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>192</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>187</td>
    <td>193</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>188</td>
    <td>194</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>189</td>
    <td>195</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="a16be55d0f128c0fe3138c57765e87277bba1516">

<h2><span class="sec-num">19.8</span>
    Forbid playing a game if game not running</h2>

<div class="message-body"><p>If the game isn't running, leave <code>play_game()</code> immediately.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a16be55d0f128c0fe3138c57765e87277bba1516"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a16be55d0f128c0fe3138c57765e87277bba1516"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>186</td>
    <td>186</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>187</td>
    <td>187</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">play_game</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>188</td>
    <td>188</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>189</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">game_is_running</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>190</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>191</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>189</td>
    <td>192</td>
    <td><pre>        <span class="nx">last_game_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>190</td>
    <td>193</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>191</td>
    <td>194</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="69adc7d9c85c08115babbe1f0868a3b98c5cd160">

<h2><span class="sec-num">19.9</span>
    Connect <code>play_game()</code> function to button</h2>

<div class="message-body"><p>The last piece is to connect the buttom to the function via a call to
<code>click()</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/69adc7d9c85c08115babbe1f0868a3b98c5cd160"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/69adc7d9c85c08115babbe1f0868a3b98c5cd160"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>193</td>
    <td>193</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>194</td>
    <td>194</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>195</td>
    <td>195</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>196</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">play_game</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>197</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>196</td>
    <td>198</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>197</td>
    <td>199</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>198</td>
    <td>200</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="46691d94adbb46d9bfa904479929dee1c09c64f2">

<h2><span class="sec-num">19.10</span>
    Lose game if Tamagotchi becomes too sad</h2>

<div class="message-body"><p>Finally, the Tamagotchi dies of a broken heart if it becomes too
unhappy, so add another condition to the test in <code>alien_is_alive()</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/46691d94adbb46d9bfa904479929dee1c09c64f2"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/46691d94adbb46d9bfa904479929dee1c09c64f2"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>12</td>
    <td>12</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>15</td>
    <td></td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>15</td>
    <td><pre>        <span class="k">return</span> <span class="p">(</span><span class="nx">hungriness</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>16</td>
    <td>16</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>17</td>
    <td>17</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>18</td>
    <td>18</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_still_growing</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="719848abac0780746042fb282a2c9f73655aa429">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">20</span>
    Give Tamagotchi a face</h2>

<div class="message-body"><p>To make the game look better, we'll give the Tamagotchi two eyes and a
smiling mouth.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/719848abac0780746042fb282a2c9f73655aa429"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/719848abac0780746042fb282a2c9f73655aa429"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>42</td>
    <td>42</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>43</td>
    <td>43</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>44</td>
    <td>44</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>45</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>46</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>47</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>48</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>49</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>50</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>51</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineCap</span> <span class="o">=</span> <span class="s1">&#39;round&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>52</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>53</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>54</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>55</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>56</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>57</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>45</td>
    <td>58</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>46</td>
    <td>59</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>47</td>
    <td>60</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="8e5afbf2bffe0d3045ce55a64e327a414204eb99">

<h2><span class="sec-num">20.1</span>
    Draw eyes</h2>

<div class="message-body"><p>After a bit of experimenting, these look like reasonable places for the
Tamagotchi's eyes.  You can experiment with other colours, or the size,
position or even number of eyes.</p>

<p>We can see how our <code>draw_circle()</code> function is getting more use, keeping
our code easy to write and read.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/8e5afbf2bffe0d3045ce55a64e327a414204eb99"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/8e5afbf2bffe0d3045ce55a64e327a414204eb99"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>42</td>
    <td>42</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>43</td>
    <td>43</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>44</td>
    <td>44</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>45</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>46</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>47</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>48</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>45</td>
    <td>49</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>46</td>
    <td>50</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>47</td>
    <td>51</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="51add9a9f9d1ef7269ca94664fe34eb3230afc6a">

<h2><span class="sec-num">20.2</span>
    Draw smiling mouth</h2>

<div class="message-body"><p>To give the Tamagotchi a mouth, we create a path and then <code>stroke()</code>
it.  This just gives the outline, not a filled-in shape.  To build the
path, we move to the starting point, then draw three lines to the other
corners in the shape.  Experiment with the shape, colour, width, etc.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/51add9a9f9d1ef7269ca94664fe34eb3230afc6a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/51add9a9f9d1ef7269ca94664fe34eb3230afc6a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>46</td>
    <td>46</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>47</td>
    <td>47</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>48</td>
    <td>48</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>49</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>50</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>51</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>52</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>53</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>54</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>55</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>56</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>49</td>
    <td>57</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>50</td>
    <td>58</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>51</td>
    <td>59</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="b457c3394d4aab6e02e2de146d49bf46f038064f">

<h2><span class="sec-num">20.3</span>
    Make line ends rounded</h2>

<div class="message-body"><p>The mouth looks slightly better if the line-ends are rounded rather than
square.  This is controlled by the <code>lineCap</code> property of the drawing
context.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/b457c3394d4aab6e02e2de146d49bf46f038064f"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/b457c3394d4aab6e02e2de146d49bf46f038064f"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>48</td>
    <td>48</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>49</td>
    <td>49</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>50</td>
    <td>50</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>51</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineCap</span> <span class="o">=</span> <span class="s1">&#39;round&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>51</td>
    <td>52</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>52</td>
    <td>53</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>53</td>
    <td>54</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="515bf4fa2495587246d37985ec915cdf35a1206d">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">21</span>
    Make Tamagotchi's appearance show its state</h2>

<div class="message-body"><p>The game will look more appealing, and also the player will have a
better chance of keeping an eye on what's going on, if we make the
Tamagotchi look different according to how hungry, happy, and healthy it
is.  We change <code>draw_alien()</code> quite a bit, to show:</p>

<ul>
<li>A sad, bored, or happy mouth.</li>
<li>A sickly green colour if it's ill.</li>
<li>A hole in its belly as it gets hungrier.</li>
</ul>

<p>The code needs updating to call <code>draw_alien()</code> at various places, to
make sure the appearance always matches the variables and levels
display.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/515bf4fa2495587246d37985ec915cdf35a1206d"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/515bf4fa2495587246d37985ec915cdf35a1206d"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>38</td>
    <td>38</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>39</td>
    <td>39</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>40</td>
    <td>40</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>41</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>41</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>42</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>43</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>44</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>45</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>46</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>47</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;rgb(0, 255, 200)&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>48</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>42</td>
    <td>49</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>43</td>
    <td>50</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>44</td>
    <td>51</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>45</td>
    <td>52</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>53</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;rgb(255, 255, 221)&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>54</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>55</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>46</td>
    <td>56</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>47</td>
    <td>57</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>48</td>
    <td>58</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>50</td>
    <td>60</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>51</td>
    <td>61</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineCap</span> <span class="o">=</span> <span class="s1">&#39;round&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>52</td>
    <td>62</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>53</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>54</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>55</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>56</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>72</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">145</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>73</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">145</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>74</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>75</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>76</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>77</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>78</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>79</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>80</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>81</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>57</td>
    <td>82</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>58</td>
    <td>83</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>84</td>
    <td><pre></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>81</td>
    <td>106</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>107</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>108</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>109</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>84</td>
    <td>110</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>85</td>
    <td>111</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>86</td>
    <td>112</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="nx">health_lost</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>92</td>
    <td>118</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>93</td>
    <td>119</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>94</td>
    <td>120</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>121</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>95</td>
    <td>122</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>96</td>
    <td>123</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>97</td>
    <td>124</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>116</td>
    <td>143</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>117</td>
    <td>144</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>118</td>
    <td>145</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>146</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>119</td>
    <td>147</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>120</td>
    <td>148</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>121</td>
    <td>149</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_older</span><span class="p">()</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>140</td>
    <td>168</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>141</td>
    <td>169</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>142</td>
    <td>170</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>171</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>143</td>
    <td>172</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>144</td>
    <td>173</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>145</td>
    <td>174</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>151</td>
    <td>180</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>152</td>
    <td>181</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>153</td>
    <td>182</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>183</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>154</td>
    <td>184</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>155</td>
    <td>185</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>156</td>
    <td>186</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">temporarily_disable</span><span class="p">(</span><span class="nx">button_id</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>203</td>
    <td>233</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>204</td>
    <td>234</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>205</td>
    <td>235</td>
    <td><pre>        <span class="nx">last_game_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>236</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>206</td>
    <td>237</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>207</td>
    <td>238</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>208</td>
    <td>239</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="cd19f1632515d7046988a1a030f4988a681149a2">

<h2><span class="sec-num">21.1</span>
    Draw Tamagotchi sickly green if not very healthy</h2>

<div class="message-body"><p>To make the game look more interesting, and also slightly easier, we'll
draw the Tamagotchi a different colour when it's sick.  The <code>rgb()</code>
notation lets you describe a colour using red, green, and blue parts in
the same way as the <code>#e3f</code> notation in CSS, except here you give three
whole numbers between 0 and 255.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/cd19f1632515d7046988a1a030f4988a681149a2"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/cd19f1632515d7046988a1a030f4988a681149a2"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>38</td>
    <td>38</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">draw_alien</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>39</td>
    <td>39</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>40</td>
    <td>40</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">480</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>41</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>41</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>42</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>43</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>44</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>45</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>46</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>47</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;rgb(0, 255, 200)&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>48</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>42</td>
    <td>49</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>43</td>
    <td>50</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>44</td>
    <td>51</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="9418e163af18eb9118788d06584db2b38a0dfa36">

<h2><span class="sec-num">21.2</span>
    Re-draw alien when health changes</h2>

<div class="message-body"><p>Whenever we change the health, we need to re-draw the alien, in case it
now needs to be a different colour.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/9418e163af18eb9118788d06584db2b38a0dfa36"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/9418e163af18eb9118788d06584db2b38a0dfa36"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>99</td>
    <td>99</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>100</td>
    <td>100</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>101</td>
    <td>101</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>102</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>102</td>
    <td>103</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>103</td>
    <td>104</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-unch">
    <td>104</td>
    <td>105</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>123</td>
    <td>124</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>124</td>
    <td>125</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>125</td>
    <td>126</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>127</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>126</td>
    <td>128</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>127</td>
    <td>129</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>128</td>
    <td>130</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_older</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="e6484110e0a952368d5f4cd6d510e14f2c572f5a">

<h2><span class="sec-num">21.3</span>
    Make Tamagotchi look bored if it is</h2>

<div class="message-body"><p>If the Tamagotchi is bored, it shouldn't be smiling.  In <code>draw_alien()</code>,
we can check whether it's bored, and if so, draw a straight mouth rather
than a smiling one.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e6484110e0a952368d5f4cd6d510e14f2c572f5a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e6484110e0a952368d5f4cd6d510e14f2c572f5a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>57</td>
    <td>57</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>58</td>
    <td>58</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineCap</span> <span class="o">=</span> <span class="s1">&#39;round&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>59</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>60</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>61</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>62</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>63</td>
    <td></td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">145</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">145</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>68</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>69</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>70</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>71</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>64</td>
    <td>72</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>65</td>
    <td>73</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>66</td>
    <td>74</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="96a30f8181115d69e625233644927700768702be">

<h2><span class="sec-num">21.4</span>
    Re-draw Tamagotchi when boredom changes</h2>

<div class="message-body"><p>Whenever the <code>bored</code> variable might change, we should re-draw the
alien.  Do so inside <code>update_alien_happiness()</code>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/96a30f8181115d69e625233644927700768702be"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/96a30f8181115d69e625233644927700768702be"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>157</td>
    <td>157</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>158</td>
    <td>158</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>159</td>
    <td>159</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>160</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>160</td>
    <td>161</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>161</td>
    <td>162</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>162</td>
    <td>163</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="17785615c1623072da8d493c94ddd9860f0fd040">

<h2><span class="sec-num">21.5</span>
    Become un-bored immediately when playing a game</h2>

<div class="message-body"><p>When the player clicks the <em>Game</em> button, the Tamagotchi doesn't
immediately become non-bored, only on the next game tick.  This isn't a
good game experience, so update the happiness (which re-draws the
Tamagotchi) as part of responding to the <em>Game</em> click.  This also gives
an immediate <code>happiness</code> boost, which is probably appropriate.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/17785615c1623072da8d493c94ddd9860f0fd040"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/17785615c1623072da8d493c94ddd9860f0fd040"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>221</td>
    <td>221</td>
    <td><pre>            <span class="k">return</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>222</td>
    <td>222</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>223</td>
    <td>223</td>
    <td><pre>        <span class="nx">last_game_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>224</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>224</td>
    <td>225</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>225</td>
    <td>226</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>226</td>
    <td>227</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="7bb59ef917eff4989955ed5dd50f3f164f2a99d3">

<h2><span class="sec-num">21.6</span>
    Make Tamagotchi look unhappy if too unhappy</h2>

<div class="message-body"><p>We can turn the smile upside down into a sad face if the Tamagotchi is
too unhappy.  We check this first, so if the Tamagotchi is both very
unhappy and bored, it looks sad.</p>

<p>We're already calling <code>draw_alien()</code> when the <code>happiness</code> variable might
change, because this is tied in with the <code>bored</code> variable.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/7bb59ef917eff4989955ed5dd50f3f164f2a99d3"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/7bb59ef917eff4989955ed5dd50f3f164f2a99d3"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>57</td>
    <td>57</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>58</td>
    <td>58</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineCap</span> <span class="o">=</span> <span class="s1">&#39;round&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>59</td>
    <td>59</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>60</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>60</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>61</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>62</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>63</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>64</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>65</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>66</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>67</td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>61</td>
    <td>68</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>62</td>
    <td>69</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">145</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>63</td>
    <td>70</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">145</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="b235b6c29ad3f2ee192d153c8dde9b3a1d1e3f5c">

<h2><span class="sec-num">21.7</span>
    Draw hole in Tamagotchi's belly to show hunger</h2>

<div class="message-body"><p>Draw a circle on top of the main circle, to make the Tamagotchi look
hollow-bellied.  The hungrier it is, the bigger the 'hole'.  The <code>rgb()</code>
values match the <code>background-color: #ffd</code> style for the <code>game</code> element
that we used in the CSS.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/b235b6c29ad3f2ee192d153c8dde9b3a1d1e3f5c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/b235b6c29ad3f2ee192d153c8dde9b3a1d1e3f5c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>50</td>
    <td>50</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>51</td>
    <td>51</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>52</td>
    <td>52</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>53</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;rgb(255, 255, 221)&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>54</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>55</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>53</td>
    <td>56</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>54</td>
    <td>57</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>55</td>
    <td>58</td>
    <td><pre>        <span class="nx">draw_circle</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="f629882aa5ed2d61cd638822be634f62b6cc2fab">

<h2><span class="sec-num">21.8</span>
    Re-draw Tamagotchi when hungriness changes</h2>

<div class="message-body"><p>To make sure the Tamagotchi's appearance matches how hungry it is, we
need to re-draw it every time we change the <code>hungriness</code> variable.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/f629882aa5ed2d61cd638822be634f62b6cc2fab"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/f629882aa5ed2d61cd638822be634f62b6cc2fab"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>106</td>
    <td>106</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>107</td>
    <td>107</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>108</td>
    <td>108</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>109</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>109</td>
    <td>110</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>110</td>
    <td>111</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>111</td>
    <td>112</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="nx">health_lost</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>179</td>
    <td>180</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>180</td>
    <td>181</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>181</td>
    <td>182</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>183</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>182</td>
    <td>184</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>183</td>
    <td>185</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>184</td>
    <td>186</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">temporarily_disable</span><span class="p">(</span><span class="nx">button_id</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="27f9cce9fa478b6fabdde630d2383a5a5f8cc573">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">22</span>
    Minor gameplay adjustments</h2>

<div class="message-body"><p>After a bit of playing, it seems the game would be better with a few
tweaks:</p>

<ul>
<li>The Tamagotchi gets bored too easily, so adjust the value saying how
often it must be played with.</li>
<li>The <em>Sweets</em> button doesn't really add much to gameplay, so make it so
sweets also make the Tamagotchi happier (as well as less hungry and
less healthy).</li>
<li>If the Tamagotchi is sick, it should become less happy.</li>
</ul>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/27f9cce9fa478b6fabdde630d2383a5a5f8cc573"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/27f9cce9fa478b6fabdde630d2383a5a5f8cc573"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>154</td>
    <td>154</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>155</td>
    <td>155</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>156</td>
    <td>156</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>157</td>
    <td></td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>157</td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>158</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>159</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">75</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>160</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>161</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>162</td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>163</td>
    <td><pre>                <span class="nx">happiness</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>164</td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>165</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>158</td>
    <td>166</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>159</td>
    <td>167</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>160</td>
    <td>168</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>210</td>
    <td>218</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>211</td>
    <td>219</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>212</td>
    <td>220</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>221</td>
    <td><pre>        <span class="c1">// Sweets make the Tamagotchi a bit happier:</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>222</td>
    <td><pre>        <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>223</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>224</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>225</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>213</td>
    <td>226</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>214</td>
    <td>227</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>215</td>
    <td>228</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="de3f55e3e0a77f46f40f22f5ae1fffb3ae70f1ae">

<h2><span class="sec-num">22.1</span>
    Make Tamagotchi get bored less readily</h2>

<div class="message-body"><p>Make it so 5 game ticks can go by before the Tamagotchi gets bored.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/de3f55e3e0a77f46f40f22f5ae1fffb3ae70f1ae"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/de3f55e3e0a77f46f40f22f5ae1fffb3ae70f1ae"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>154</td>
    <td>154</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>155</td>
    <td>155</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>156</td>
    <td>156</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>157</td>
    <td></td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>157</td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>158</td>
    <td>158</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>159</td>
    <td>159</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>160</td>
    <td>160</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="c4f0c207392d987fbf7b2dab68d26026e159e853">

<h2><span class="sec-num">22.2</span>
    Sweets make Tamagotchi a bit happier</h2>

<div class="message-body"><p>We can get away without having to call <code>draw_alien()</code>, because we know
that <code>make_alien_sicker()</code> will do that for us.  This is quite a fragile
approach, however.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/c4f0c207392d987fbf7b2dab68d26026e159e853"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/c4f0c207392d987fbf7b2dab68d26026e159e853"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>210</td>
    <td>210</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>211</td>
    <td>211</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>212</td>
    <td>212</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>213</td>
    <td><pre>        <span class="c1">// Sweets make the Tamagotchi a bit happier:</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>214</td>
    <td><pre>        <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>215</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>216</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>217</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>213</td>
    <td>218</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>214</td>
    <td>219</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>215</td>
    <td>220</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="6cc0c9f5d9d449a5d0e0d658297a42a10f38393c">

<h2><span class="sec-num">22.3</span>
    Being unhealthy makes the Tamagotchi sadder</h2>

<div class="message-body"><p>If the Tamagotchi is unhealthy, it gets sadder, but only down to a
certain level of happiness.  We don't have to check happiness remains
non-negative, because we only adjust it if it is bigger than 40 to start
with.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/6cc0c9f5d9d449a5d0e0d658297a42a10f38393c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/6cc0c9f5d9d449a5d0e0d658297a42a10f38393c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>156</td>
    <td>156</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>157</td>
    <td>157</td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>158</td>
    <td>158</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>159</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">75</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>160</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>161</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>162</td>
    <td><pre>            <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>163</td>
    <td><pre>                <span class="nx">happiness</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>164</td>
    <td><pre>            <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>165</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>166</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>159</td>
    <td>167</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">bored</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-unch">
    <td>160</td>
    <td>168</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>161</td>
    <td>169</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">-=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="49d6638b631772c26ff205a0d5c4f501de94bb6c">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">23</span>
    Simplify display-update logic</h2>

<div class="message-body"><p>The current logic for making sure the display is up-to-date is a bit
fragile and scattered.  Every time we change a variable, we update that
part of the display.  Simpler would be to update the whole display after
anything might have changed.</p>

<p>We collect all the display-update code into one new function,
<code>update_display()</code>, and call it whenever things might have changed.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/49d6638b631772c26ff205a0d5c4f501de94bb6c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/49d6638b631772c26ff205a0d5c4f501de94bb6c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>102</td>
    <td>102</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>103</td>
    <td>103</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>104</td>
    <td>104</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>105</td>
    <td></td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>105</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_display</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>106</td>
    <td>106</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>107</td>
    <td></td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>108</td>
    <td>107</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>108</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>109</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>110</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>109</td>
    <td>111</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>112</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>113</td>
    <td><pre>            <span class="nx">game_over_won</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>114</td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>115</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>116</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>117</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>118</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>119</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>120</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>110</td>
    <td>121</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>111</td>
    <td>122</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>112</td>
    <td>123</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="nx">health_lost</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>116</td>
    <td>127</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>117</td>
    <td>128</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>118</td>
    <td>129</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>119</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>120</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>121</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>122</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>123</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>124</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>125</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>126</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>127</td>
    <td>130</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>128</td>
    <td>131</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>129</td>
    <td>132</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">maybe_make_alien_sicker</span><span class="p">()</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>141</td>
    <td>144</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>142</td>
    <td>145</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>143</td>
    <td>146</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>144</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>145</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>146</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>147</td>
    <td>147</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>148</td>
    <td>148</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>149</td>
    <td>149</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_older</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>150</td>
    <td>150</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>151</td>
    <td>151</td>
    <td><pre>        <span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>152</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>153</td>
    <td>152</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>154</td>
    <td>153</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>155</td>
    <td>154</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>174</td>
    <td>173</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>175</td>
    <td>174</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>176</td>
    <td>175</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>177</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>178</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>179</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>180</td>
    <td>176</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>181</td>
    <td>177</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>182</td>
    <td>178</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>186</td>
    <td>182</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>187</td>
    <td>183</td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>188</td>
    <td>184</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>189</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>190</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>191</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>192</td>
    <td>185</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>193</td>
    <td>186</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>194</td>
    <td>187</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">temporarily_disable</span><span class="p">(</span><span class="nx">button_id</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>206</td>
    <td>199</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>207</td>
    <td>200</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>208</td>
    <td>201</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>202</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>203</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>209</td>
    <td>204</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>210</td>
    <td>205</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>211</td>
    <td>206</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>221</td>
    <td>216</td>
    <td><pre>        <span class="c1">// Sweets make the Tamagotchi a bit happier:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>222</td>
    <td>217</td>
    <td><pre>        <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>223</td>
    <td>218</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>224</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>225</td>
    <td>219</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>226</td>
    <td>220</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>227</td>
    <td>221</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>222</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>223</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>228</td>
    <td>224</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>229</td>
    <td>225</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>230</td>
    <td>226</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>236</td>
    <td>232</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>237</td>
    <td>233</td>
    <td><pre>        <span class="nx">make_healthier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>238</td>
    <td>234</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>235</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>236</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>239</td>
    <td>237</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>240</td>
    <td>238</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>241</td>
    <td>239</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">give_alien_medicine</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>248</td>
    <td>246</td>
    <td><pre>        <span class="nx">last_game_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>249</td>
    <td>247</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>250</td>
    <td>248</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>249</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>250</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>251</td>
    <td>251</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>252</td>
    <td>252</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>253</td>
    <td>253</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">play_game</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>272</td>
    <td>272</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>273</td>
    <td>273</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>274</td>
    <td>274</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>275</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>276</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>277</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_won</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>278</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>279</td>
    <td></td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>280</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>281</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>282</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>283</td>
    <td></td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-del">
    <td>284</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>285</td>
    <td></td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>286</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>275</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>276</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>277</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>287</td>
    <td>278</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>288</td>
    <td>279</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="3a22e6d6068cc05fd0654eda21fe1e504e767b04">

<h2><span class="sec-num">23.1</span>
    <code>update_display()</code>: Add</h2>

<div class="message-body"><p>Collect the various updates to the different bits of the webpage
together into one function.  When we call this function, many parts will
not have changed, so we will be doing more work than required.  But
computers are fast these days, and making the code simpler to understand
is usually more important than having it run as quickly as possible.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/3a22e6d6068cc05fd0654eda21fe1e504e767b04"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/3a22e6d6068cc05fd0654eda21fe1e504e767b04"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>102</td>
    <td>102</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>103</td>
    <td>103</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>104</td>
    <td>104</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>105</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_display</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>106</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>107</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>108</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>109</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>110</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>111</td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>112</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>113</td>
    <td><pre>            <span class="nx">game_over_won</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>114</td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>115</td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>116</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>117</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>105</td>
    <td>118</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>106</td>
    <td>119</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>107</td>
    <td>120</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="9e7b24f3e9cfd9a78cdd11c74f92ce4c0cd1d1c4">

<h2><span class="sec-num">23.2</span>
    <code>make_alien_hungrier()</code>: Simplify</h2>

<div class="message-body"><p>Remove display-update code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/9e7b24f3e9cfd9a78cdd11c74f92ce4c0cd1d1c4"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/9e7b24f3e9cfd9a78cdd11c74f92ce4c0cd1d1c4"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>118</td>
    <td>118</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_hungrier</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>119</td>
    <td>119</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>120</td>
    <td>120</td>
    <td><pre>        <span class="nx">hungriness</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>121</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>122</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>123</td>
    <td>121</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>124</td>
    <td>122</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>125</td>
    <td>123</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="nx">health_lost</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="a7e1bb67411d6646655452d8ca849866a4500f85">

<h2><span class="sec-num">23.3</span>
    <code>make_alien_sicker()</code>: Simplify</h2>

<div class="message-body"><p>Remove display-update code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a7e1bb67411d6646655452d8ca849866a4500f85"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a7e1bb67411d6646655452d8ca849866a4500f85"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>127</td>
    <td>127</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>128</td>
    <td>128</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>129</td>
    <td>129</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>130</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>131</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>132</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>133</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>134</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>135</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>136</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>137</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>138</td>
    <td>130</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>139</td>
    <td>131</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>140</td>
    <td>132</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">maybe_make_alien_sicker</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="8eb994365c1c19bbced73f80e9e1b7b67e4664e2">

<h2><span class="sec-num">23.4</span>
    <code>make_healthier()</code>: Simplify</h2>

<div class="message-body"><p>Remove display-update code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/8eb994365c1c19bbced73f80e9e1b7b67e4664e2"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/8eb994365c1c19bbced73f80e9e1b7b67e4664e2"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>144</td>
    <td>144</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>145</td>
    <td>145</td>
    <td><pre>            <span class="nx">health</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>146</td>
    <td>146</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>147</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>148</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#health&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">health</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>149</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>150</td>
    <td>147</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>151</td>
    <td>148</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>152</td>
    <td>149</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_older</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="89bb58f122c52db1505abf2712f258e12459ab58">

<h2><span class="sec-num">23.5</span>
    <code>make_alien_older()</code>: Simplify</h2>

<div class="message-body"><p>Remove display-update code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/89bb58f122c52db1505abf2712f258e12459ab58"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/89bb58f122c52db1505abf2712f258e12459ab58"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>149</td>
    <td>149</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">make_alien_older</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>150</td>
    <td>150</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>151</td>
    <td>151</td>
    <td><pre>        <span class="nx">age</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>152</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#age&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">age</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>153</td>
    <td>152</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>154</td>
    <td>153</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>155</td>
    <td>154</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="e74628230afd853560a3ea90b1b13942d07adbb9">

<h2><span class="sec-num">23.6</span>
    <code>update_alien_happiness()</code>: Simplify</h2>

<div class="message-body"><p>Remove display-update code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e74628230afd853560a3ea90b1b13942d07adbb9"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e74628230afd853560a3ea90b1b13942d07adbb9"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>173</td>
    <td>173</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>174</td>
    <td>174</td>
    <td><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>175</td>
    <td>175</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>176</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>177</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>178</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>179</td>
    <td>176</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>180</td>
    <td>177</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>181</td>
    <td>178</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">feed_alien</span><span class="p">(</span><span class="nx">hungriness_reduction</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="043fc3fb131d82a6be85c791605db453d97f9a0b">

<h2><span class="sec-num">23.7</span>
    <code>feed_alien()</code>: Simplify</h2>

<div class="message-body"><p>Remove display-update code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/043fc3fb131d82a6be85c791605db453d97f9a0b"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/043fc3fb131d82a6be85c791605db453d97f9a0b"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>182</td>
    <td>182</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>183</td>
    <td>183</td>
    <td><pre>            <span class="nx">hungriness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>184</td>
    <td>184</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>185</td>
    <td></td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>186</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hungriness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">hungriness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>187</td>
    <td></td>
    <td><pre>        <span class="nx">draw_alien</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>188</td>
    <td>185</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>189</td>
    <td>186</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>190</td>
    <td>187</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">temporarily_disable</span><span class="p">(</span><span class="nx">button_id</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="411a81aa89d7c6f8b10b3a467d5e5fd19c0fee5b">

<h2><span class="sec-num">23.8</span>
    <code>feed_alien_sweets()</code>: Simplify</h2>

<div class="message-body"><p>Remove display-update code.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/411a81aa89d7c6f8b10b3a467d5e5fd19c0fee5b"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/411a81aa89d7c6f8b10b3a467d5e5fd19c0fee5b"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>214</td>
    <td>214</td>
    <td><pre>        <span class="c1">// Sweets make the Tamagotchi a bit happier:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>215</td>
    <td>215</td>
    <td><pre>        <span class="nx">happiness</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>216</td>
    <td>216</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>217</td>
    <td></td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#happiness&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">happiness</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>218</td>
    <td>217</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>219</td>
    <td>218</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>220</td>
    <td>219</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="eab20215573a5952fca61f969a2aef6445a53948">

<h2><span class="sec-num">23.9</span>
    Call <code>update_display()</code> where required</h2>

<div class="message-body"><p>Every part of the code which changes the game's state now needs to call
<code>update_display()</code>.  These parts are the 'time goes by' code, and any
user-driven behaviour (button clicks):</p>

<ul>
<li><code>feed_alien_some_bread()</code></li>
<li><code>feed_alien_sweets()</code></li>
<li><code>give_alien_medicine()</code></li>
<li><code>play_game()</code></li>
<li><code>time_goes_by()</code></li>
</ul>

<p>We have temporarily broken the timer code, because it was tied up with
the display update for win/lose.  We'll fix that shortly.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/eab20215573a5952fca61f969a2aef6445a53948"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/eab20215573a5952fca61f969a2aef6445a53948"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>199</td>
    <td>199</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>200</td>
    <td>200</td>
    <td><pre>        <span class="nx">feed_alien</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>201</td>
    <td>201</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>202</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>203</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>202</td>
    <td>204</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>203</td>
    <td>205</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>204</td>
    <td>206</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-bread&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_some_bread</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>217</td>
    <td>219</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>218</td>
    <td>220</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>219</td>
    <td>221</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>222</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>223</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>220</td>
    <td>224</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>221</td>
    <td>225</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>222</td>
    <td>226</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#feed-sweets&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">feed_alien_sweets</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>228</td>
    <td>232</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>229</td>
    <td>233</td>
    <td><pre>        <span class="nx">make_healthier</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>230</td>
    <td>234</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>235</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>236</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>231</td>
    <td>237</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>232</td>
    <td>238</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>233</td>
    <td>239</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#give-medicine&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">give_alien_medicine</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>240</td>
    <td>246</td>
    <td><pre>        <span class="nx">last_game_age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>241</td>
    <td>247</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>242</td>
    <td>248</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>249</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>250</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>243</td>
    <td>251</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>244</td>
    <td>252</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>245</td>
    <td>253</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">play_game</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>264</td>
    <td>272</td>
    <td><pre>        <span class="nx">make_alien_older</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>265</td>
    <td>273</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>266</td>
    <td>274</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>267</td>
    <td></td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_still_growing</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>268</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>269</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_won</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>270</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>271</td>
    <td></td>
    <td><pre>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">alien_is_alive</span><span class="p">())</span></pre></td></tr>
  <tr class="diff-del">
    <td>272</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>273</td>
    <td></td>
    <td><pre>            <span class="nx">game_over_lost</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-del">
    <td>274</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>275</td>
    <td></td>
    <td><pre>        <span class="k">else</span></pre></td></tr>
  <tr class="diff-del">
    <td>276</td>
    <td></td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-del">
    <td>277</td>
    <td></td>
    <td><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-del">
    <td>278</td>
    <td></td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>275</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>279</td>
    <td>276</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>280</td>
    <td>277</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="bd620aca1198c2e3494a46cca3d52e61c6a0e57c">

<h2><span class="sec-num">23.10</span>
    Re-call <code>time_goes_by()</code> while game still running</h2>

<div class="message-body"><p>The first thing we do in <code>time_goes_by()</code> is to leave the function if
the game has stopped (through win or loss), so we should always
re-schedule a timer if we reach the end of this function.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/bd620aca1198c2e3494a46cca3d52e61c6a0e57c"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/bd620aca1198c2e3494a46cca3d52e61c6a0e57c"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>273</td>
    <td>273</td>
    <td><pre>        <span class="nx">update_alien_happiness</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>274</td>
    <td>274</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>275</td>
    <td>275</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>276</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>277</td>
    <td><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">time_goes_by</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>276</td>
    <td>278</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>277</td>
    <td>279</td>
    <td><pre><span class="p">});</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div><div class="literate-git-node" data-commit-sha1="e15964476a58de9a69fb47ea6743e1eb5fc28e6e">

  <h2 class="nav prev">&lt;</h2>
  <h2 class="nav next">&gt;</h2>

<h2><span class="sec-num">24</span>
    Add 'sweet wrappers' features</h2>

<div class="message-body"><p>When the Tamagotchi eats sweets, it drops the wrappers on the floor of
its room.  The untidiness makes it unhappy, and it gets unhappier more
quickly the more wrappers are littering its room.  To allow the player
to fix this, we add a <em>Sweep</em> button, which clears up all the wrappers.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/e15964476a58de9a69fb47ea6743e1eb5fc28e6e"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/e15964476a58de9a69fb47ea6743e1eb5fc28e6e"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<h2 class="nav expand">+</h2>
<h2 class="nav collapse">-</h2>

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">bored</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">last_game_age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[];</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>80</td>
    <td>81</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>81</td>
    <td>82</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>83</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>84</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>85</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>86</td>
    <td><pre>        <span class="nx">sweet_wrappers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>87</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">w</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>88</td>
    <td><pre>        <span class="p">});</span></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>89</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>84</td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>85</td>
    <td>91</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>153</td>
    <td>159</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>154</td>
    <td>160</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>155</td>
    <td>161</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>162</td>
    <td><pre>        <span class="nx">happiness</span> <span class="o">-=</span> <span class="nx">sweet_wrappers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>163</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>164</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>165</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>166</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>167</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>156</td>
    <td>168</td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>157</td>
    <td>169</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>158</td>
    <td>170</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">75</span><span class="p">)</span></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>220</td>
    <td>232</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>221</td>
    <td>233</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>222</td>
    <td>234</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>235</td>
    <td><pre>        <span class="nx">add_sweet_wrapper</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>236</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>223</td>
    <td>237</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>224</td>
    <td>238</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>225</td>
    <td>239</td>
    <td><pre></pre></td></tr>
  </table>
  <p class="inter-hunk">&vellip;</p>
  <table class="diff">
  <tr class="diff-unch">
    <td>252</td>
    <td>266</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>253</td>
    <td>267</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">play_game</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>254</td>
    <td>268</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>269</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">sweep_up_wrappers</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>270</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>271</td>
    <td><pre>        <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[];</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>272</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#sweep-up&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>273</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>274</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>275</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>276</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>277</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#sweep-up&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">sweep_up_wrappers</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>278</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>279</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">add_sweet_wrapper</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>280</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>281</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_x</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">420</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>282</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_y</span> <span class="o">=</span> <span class="mi">240</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">200</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>283</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>284</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="p">[</span><span class="nx">wrapper_x</span><span class="p">,</span> <span class="nx">wrapper_y</span><span class="p">];</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>285</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>286</td>
    <td><pre>        <span class="nx">sweet_wrappers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>287</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>288</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>255</td>
    <td>289</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>256</td>
    <td>290</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>257</td>
    <td>291</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>27</td>
    <td>27</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;give-medicine&quot;</span><span class="p">&gt;</span>Medicine<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>29</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;play-game&quot;</span><span class="p">&gt;</span>Game<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>30</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;sweep-up&quot;</span><span class="p">&gt;</span>Sweep<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>31</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>32</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>32</td>
    <td>33</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span> <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span> <span class="k">left</span><span class="p">:</span> <span class="mi">520</span><span class="kt">px</span><span class="p">;</span> <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>8</td>
    <td></td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre><span class="p">#</span><span class="nn">age-para</span> <span class="p">{</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


<div class="children">
<div class="literate-git-node" data-commit-sha1="a9711d9431cda589480a0f319447c81993b87f69">

<h2><span class="sec-num">24.1</span>
    Add variable to remember where wrappers are</h2>

<div class="message-body"><p>JavaScript variables can be <em>lists</em>, properly known in JavaScript
as <em>arrays</em>, which means they can hold more than one object.  Scratch
has the same idea.  At the start of the game, there are no wrappers, so
we have a list with nothing in it.  This is known as an <em>empty list</em>.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a9711d9431cda589480a0f319447c81993b87f69"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a9711d9431cda589480a0f319447c81993b87f69"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">bored</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">last_game_age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[];</span></pre></td></tr>
  <tr class="diff-unch">
    <td>12</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="2a735a73bed1efdfd48c11ae838a38848fae0a9a">

<h2><span class="sec-num">24.2</span>
    Temporarily add some wrappers for testing</h2>

<div class="message-body"><p><strong>But!</strong>  For testing how we draw the wrappers, we want to start off by
putting some wrappers in the list.  How are we going to say where the
wrappers are?  To say where one wrapper is, we need its <em>x</em> and <em>y</em>
coordinates, so we'll represent each wrapper as a two-entry list.  We'll
make up places for two test wrappers.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/2a735a73bed1efdfd48c11ae838a38848fae0a9a"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/2a735a73bed1efdfd48c11ae838a38848fae0a9a"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">bored</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">last_game_age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>12</td>
    <td></td>
    <td><pre>    <span class="kd">var</span> <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[];</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mi">280</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span> <span class="p">[</span><span class="mi">140</span><span class="p">,</span> <span class="mi">320</span><span class="p">]</span> <span class="p">];</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="a4f18bb5b21d2dab6a324878ccca0f9f805c4c56">

<h2><span class="sec-num">24.3</span>
    Draw the wrappers</h2>

<div class="message-body"><p>We have a <code>draw_alien()</code> function, which we'll give the job of drawing
the wrappers, even though they're not really part of the alien.</p>

<p>We want to draw each wrapper, and one way to do this in JavaScript is to
use the <code>forEach()</code> method on the list of things.</p>

<p>In this code, the <code>w</code> variable is set (by JavaScript) to be equal to
each of the things in <code>sweet_wrappers</code> in turn, and the <code>fillRect()</code> is
done for each one.  Remember that each thing in the list is itself a
list, with the <em>x</em> and <em>y</em> coordinates as its two entries.  You get
things out of this list with <code>w[0]</code> to get the first, and <code>w[1]</code> for the
second.  JavaScript counts list entries starting from zero.  Here I've
just drawn a red rectangular sweet wrapper but you can do something more
complicated if you like.</p>

<p>If you try the game now, you should see the two test sweet-wrappers we
set up.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/a4f18bb5b21d2dab6a324878ccca0f9f805c4c56"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/a4f18bb5b21d2dab6a324878ccca0f9f805c4c56"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>81</td>
    <td>81</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">130</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>82</td>
    <td>82</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>83</td>
    <td>83</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>84</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>85</td>
    <td><pre>        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>86</td>
    <td><pre>        <span class="nx">sweet_wrappers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>87</td>
    <td><pre>            <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">w</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">w</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>88</td>
    <td><pre>        <span class="p">});</span></pre></td></tr>
  <tr class="diff-unch">
    <td>84</td>
    <td>89</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>85</td>
    <td>90</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>86</td>
    <td>91</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#hatch&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">draw_alien_fade_instructions</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="1dd5e32702a387df1f610e0c1ef1bf62ff439dd3">

<h2><span class="sec-num">24.4</span>
    Remove temporary testing sweet-wrappers</h2>

<div class="message-body"><p>Now we've got the drawing code working, we can remove the temporary
sweet-wrappers, and start off with an empty <code>sweet_wrappers</code> list.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/1dd5e32702a387df1f610e0c1ef1bf62ff439dd3"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/1dd5e32702a387df1f610e0c1ef1bf62ff439dd3"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">bored</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>10</td>
    <td>10</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">last_game_age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>11</td>
    <td>11</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-del">
    <td>12</td>
    <td></td>
    <td><pre>    <span class="kd">var</span> <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mi">280</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span> <span class="p">[</span><span class="mi">140</span><span class="p">,</span> <span class="mi">320</span><span class="p">]</span> <span class="p">];</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>12</td>
    <td><pre>    <span class="kd">var</span> <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[];</span></pre></td></tr>
  <tr class="diff-unch">
    <td>13</td>
    <td>13</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>14</td>
    <td>14</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">alien_is_alive</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>15</td>
    <td>15</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="bf4aa263aa0f2388a1b088526e13783248ef2e5e">

<h2><span class="sec-num">24.5</span>
    Make up random position for a new wrapper</h2>

<div class="message-body"><p>When the Tamagotchi gets a sweet, we'll need to make up a random
position for it to drop the wrapper.  We'll use the same <code>Math.random()</code>
function as we've done before (when we were randomly making it sick).
But this time we need to turn our random number between 0 and 1 into a
sensible position on the canvas, which we do by multiplying by the range
of possible values, then adding the smallest desired value.</p>

<p>Here's I've made it so the wrappers will only appear in the bottom half
of the screen, by making <code>wrapper_y</code> be at least 240.</p>

<p>So far this function makes up the <code>x</code> and <code>y</code> coordinates of the
wrapper's position, but doesn't yet add the new wrapper to the list.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/bf4aa263aa0f2388a1b088526e13783248ef2e5e"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/bf4aa263aa0f2388a1b088526e13783248ef2e5e"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>258</td>
    <td>258</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>259</td>
    <td>259</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">play_game</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>260</td>
    <td>260</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>261</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">add_sweet_wrapper</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>262</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>263</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_x</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">420</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>264</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_y</span> <span class="o">=</span> <span class="mi">240</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">200</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>265</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>266</td>
    <td><pre>        <span class="c1">// TODO: Add the new wrapper to the list.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>267</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>268</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>261</td>
    <td>269</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>262</td>
    <td>270</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>263</td>
    <td>271</td>
    <td><pre>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#messages&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;Oh no!  Your Tamagotchi died!&#39;</span><span class="p">);</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="fd7f5ed01c032d148be80bfcff3924ab323c7a26">

<h2><span class="sec-num">24.6</span>
    Combine x- and y-coordinates into two-element list</h2>

<div class="message-body"><p>Our <code>sweet_wrappers</code> variable is a list, where each thing on that list
is itself a two-element list, for the <code>x</code> and <code>y</code> coordinates of the
wrapper.  We'll create that two-element list now, using the <code>[...]</code>
notation to make a new list with the required two elements.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/fd7f5ed01c032d148be80bfcff3924ab323c7a26"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/fd7f5ed01c032d148be80bfcff3924ab323c7a26"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>263</td>
    <td>263</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_x</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">420</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>264</td>
    <td>264</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_y</span> <span class="o">=</span> <span class="mi">240</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">200</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>265</td>
    <td>265</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>266</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="p">[</span><span class="nx">wrapper_x</span><span class="p">,</span> <span class="nx">wrapper_y</span><span class="p">];</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>267</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>266</td>
    <td>268</td>
    <td><pre>        <span class="c1">// TODO: Add the new wrapper to the list.</span></pre></td></tr>
  <tr class="diff-unch">
    <td>267</td>
    <td>269</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>268</td>
    <td>270</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="477c58848000be599869b4dea81b0b9620cb62f8">

<h2><span class="sec-num">24.7</span>
    Add new sweet-wrapper location to list</h2>

<div class="message-body"><p>Finally, we use the <code>push()</code> method to add a new item to the end of our
<code>sweet_wrappers</code> array.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/477c58848000be599869b4dea81b0b9620cb62f8"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/477c58848000be599869b4dea81b0b9620cb62f8"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>265</td>
    <td>265</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>266</td>
    <td>266</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="p">[</span><span class="nx">wrapper_x</span><span class="p">,</span> <span class="nx">wrapper_y</span><span class="p">];</span></pre></td></tr>
  <tr class="diff-unch">
    <td>267</td>
    <td>267</td>
    <td><pre></pre></td></tr>
  <tr class="diff-del">
    <td>268</td>
    <td></td>
    <td><pre>        <span class="c1">// TODO: Add the new wrapper to the list.</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>268</td>
    <td><pre>        <span class="nx">sweet_wrappers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>269</td>
    <td>269</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>270</td>
    <td>270</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>271</td>
    <td>271</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">game_over_lost</span><span class="p">()</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="6fd6b99cba19a0707ce6a76f886bfe27159a0ca1">

<h2><span class="sec-num">24.8</span>
    Add a sweet-wrapper when feeding sweets</h2>

<div class="message-body"><p>To actually add a wrapper, we need to call our new <code>add_sweet_wrapper()</code>
function as part of <code>feed_alien_sweets()</code>.</p>

<p>Because we recently re-organised the code to do all display updates
inside <code>update_display()</code>, the wrappers get drawn automatically.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/6fd6b99cba19a0707ce6a76f886bfe27159a0ca1"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/6fd6b99cba19a0707ce6a76f886bfe27159a0ca1"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>226</td>
    <td>226</td>
    <td><pre>        <span class="c1">// Sweets are not healthy:</span></pre></td></tr>
  <tr class="diff-unch">
    <td>227</td>
    <td>227</td>
    <td><pre>        <span class="nx">make_alien_sicker</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>228</td>
    <td>228</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>229</td>
    <td><pre>        <span class="nx">add_sweet_wrapper</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>230</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>229</td>
    <td>231</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>230</td>
    <td>232</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>231</td>
    <td>233</td>
    <td><pre></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="64ea33860714694d00814277638d5c22abaae9ba">

<h2><span class="sec-num">24.9</span>
    Wrappers make the Tamagotchi unhappy</h2>

<div class="message-body"><p>The messier its home is, the quicker it becomes unhappy.  We'll subtract
happiness points equal to the number of wrappers littering the place.
To do this, we use the <code>length</code> property of <code>sweet_wrappers</code>, which
tells us how many things are in the array.</p>

<p>As usual, we have to make sure that we don't leave the <code>happiness</code>
negative.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/64ea33860714694d00814277638d5c22abaae9ba"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/64ea33860714694d00814277638d5c22abaae9ba"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>159</td>
    <td>159</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>160</td>
    <td>160</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">update_alien_happiness</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>161</td>
    <td>161</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>162</td>
    <td><pre>        <span class="nx">happiness</span> <span class="o">-=</span> <span class="nx">sweet_wrappers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>163</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">happiness</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>164</td>
    <td><pre>        <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>165</td>
    <td><pre>            <span class="nx">happiness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>166</td>
    <td><pre>        <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>167</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>162</td>
    <td>168</td>
    <td><pre>        <span class="nx">bored</span> <span class="o">=</span> <span class="p">((</span><span class="nx">age</span> <span class="o">-</span> <span class="nx">last_game_age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>163</td>
    <td>169</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>164</td>
    <td>170</td>
    <td><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">health</span> <span class="o">&lt;</span> <span class="mi">75</span><span class="p">)</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="1e7d9520a44a627f5db826031a5df43660a679c8">

<h2><span class="sec-num">24.10</span>
    Add button to sweep up</h2>

<div class="message-body"><p>The player needs a way to tidy up the sweet wrappers, so add a <em>Sweep</em>
button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/1e7d9520a44a627f5db826031a5df43660a679c8"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/1e7d9520a44a627f5db826031a5df43660a679c8"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>page.html</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>27</td>
    <td>27</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;feed-sweets&quot;</span><span class="p">&gt;</span>Sweets<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>28</td>
    <td>28</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;give-medicine&quot;</span><span class="p">&gt;</span>Medicine<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>29</td>
    <td>29</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;play-game&quot;</span><span class="p">&gt;</span>Game<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>30</td>
    <td><pre>      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;sweep-up&quot;</span><span class="p">&gt;</span>Sweep<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>30</td>
    <td>31</td>
    <td><pre>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>31</td>
    <td>32</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>32</td>
    <td>33</td>
    <td><pre>    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="ee5bee1475fcb096e584d412de3ca5d4ec7494ce">

<h2><span class="sec-num">24.11</span>
    Tighten spacing of action buttons</h2>

<div class="message-body"><p>Depending on your browser zoom and other styling you've chosen for the
buttons, there might now be too many buttons to fit on one row.  Adjust
the styling to put less space by the buttons, allowing them to fit.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/ee5bee1475fcb096e584d412de3ca5d4ec7494ce"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/ee5bee1475fcb096e584d412de3ca5d4ec7494ce"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>style.css</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>5</td>
    <td>5</td>
    <td><pre><span class="p">#</span><span class="nn">levels</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span> <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span> <span class="k">left</span><span class="p">:</span> <span class="mi">520</span><span class="kt">px</span><span class="p">;</span> <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>6</td>
    <td>6</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="p">{</span> <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span></pre></td></tr>
  <tr class="diff-unch">
    <td>7</td>
    <td>7</td>
    <td><pre>                  <span class="k">width</span><span class="p">:</span> <span class="mi">480</span><span class="kt">px</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ddf</span><span class="p">;</span> <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-del">
    <td>8</td>
    <td></td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>8</td>
    <td><pre><span class="p">#</span><span class="nn">action-buttons</span> <span class="nt">button</span> <span class="p">{</span> <span class="k">margin</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>9</td>
    <td>9</td>
    <td><pre><span class="p">#</span><span class="nn">age-para</span> <span class="p">{</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span> <span class="p">}</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="72ef860839dbab4151cee12a6e05816a7b1bd663">

<h2><span class="sec-num">24.12</span>
    <code>sweep_up_wrappers()</code>: Add</h2>

<div class="message-body"><p>When the player clicks the button, we're going to want to remove all the
sweet wrappers.  The easiest way to do this is just to make
<code>sweet_wrappers</code> be a fresh empty array.</p>

<p>We also need to temporarily disable the <em>Sweep</em> button, and also update
the display, to make sure the clean room is immediately shown.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/72ef860839dbab4151cee12a6e05816a7b1bd663"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/72ef860839dbab4151cee12a6e05816a7b1bd663"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>266</td>
    <td>266</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>267</td>
    <td>267</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#play-game&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">play_game</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-unch">
    <td>268</td>
    <td>268</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>269</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">sweep_up_wrappers</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>270</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>271</td>
    <td><pre>        <span class="nx">sweet_wrappers</span> <span class="o">=</span> <span class="p">[];</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>272</td>
    <td><pre>        <span class="nx">temporarily_disable</span><span class="p">(</span><span class="s1">&#39;#sweep-up&#39;</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>273</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>274</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>275</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>276</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>269</td>
    <td>277</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">add_sweet_wrapper</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>270</td>
    <td>278</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>271</td>
    <td>279</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_x</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">420</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div><div class="literate-git-node" data-commit-sha1="6a50afc690c7685b5107886eebea1fbd2c30e6b1">

<h2><span class="sec-num">24.13</span>
    Connect <code>sweep_up_wrappers()</code> to button</h2>

<div class="message-body"><p>Finally, say that we want our new <code>sweep_up_wrappers()</code> function to be
run when the player clicks the <em>Sweep</em> button.</p>
</div>

<p class="links">
  <a target="LiterateGitResult"
     href="http://example.com/results/6a50afc690c7685b5107886eebea1fbd2c30e6b1"><span>RESULT</span></a>
  <a target="LiterateGitSource"
     href="http://example.com/source/6a50afc690c7685b5107886eebea1fbd2c30e6b1"><span>SOURCE</span></a>
</p>

<div class="diff-or-children">

<div class="diff">  
  <div class="patch">
  <!-- TODO: Handle 'rename' diffs -->
  <h4>code.js</h4>
  
  
  <table class="diff">
  <tr class="diff-unch">
    <td>274</td>
    <td>274</td>
    <td><pre>        <span class="nx">update_display</span><span class="p">();</span></pre></td></tr>
  <tr class="diff-unch">
    <td>275</td>
    <td>275</td>
    <td><pre>    <span class="p">}</span></pre></td></tr>
  <tr class="diff-unch">
    <td>276</td>
    <td>276</td>
    <td><pre></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>277</td>
    <td><pre>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#sweep-up&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">sweep_up_wrappers</span><span class="p">);</span></pre></td></tr>
  <tr class="diff-add">
    <td></td>
    <td>278</td>
    <td><pre></pre></td></tr>
  <tr class="diff-unch">
    <td>277</td>
    <td>279</td>
    <td><pre>    <span class="kd">function</span> <span class="nx">add_sweet_wrapper</span><span class="p">()</span></pre></td></tr>
  <tr class="diff-unch">
    <td>278</td>
    <td>280</td>
    <td><pre>    <span class="p">{</span></pre></td></tr>
  <tr class="diff-unch">
    <td>279</td>
    <td>281</td>
    <td><pre>        <span class="kd">var</span> <span class="nx">wrapper_x</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">420</span><span class="p">;</span></pre></td></tr>
  </table>
  </div>
  </div>


</div>
</div>
</div>

</div>
</div>

<div class="project-link-footer">
  <p>This is a
    <a href="https://github.com/bennorth/literate-git/">&lsquo;literate git&rsquo;</a>
    interactive document.</p></div>
    <div class="nav-tooltip" id="tooltip-next"><div class="tooltip-arrow" data-popper-arrow></div><p>Use this button to advance to the next section in the history.</p><p class="dismiss noselect"><span>DISMISS</span></p></div>
    <div class="nav-tooltip" id="tooltip-previous"><div class="tooltip-arrow" data-popper-arrow></div><p>Use this button to go back to the previous section in the history.</p><p class="dismiss noselect"><span>DISMISS</span></p></div>
    <div class="nav-tooltip" id="tooltip-expand"><div class="tooltip-arrow" data-popper-arrow></div><p>Use this button to expand the section and see more detail about the steps.</p><p class="dismiss noselect"><span>DISMISS</span></p></div>
    <div class="nav-tooltip" id="tooltip-collapse"><div class="tooltip-arrow" data-popper-arrow></div><p>Use this button to collapse the details of this section and see just a summary.</p><p class="dismiss noselect"><span>DISMISS</span></p></div>
  </div>
  </body>
</html>
